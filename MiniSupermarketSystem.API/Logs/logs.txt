2025-04-13 16:34:46.099 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-13 16:34:51.047 +01:00 [INF] Executed DbCommand (142ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-13 16:35:09.823 +01:00 [INF] Executed DbCommand (18,546ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-13 16:35:09.912 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-13 16:35:09.923 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-13 16:35:10.024 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-13 16:35:10.162 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-13 16:35:14.711 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-13 16:35:15.524 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-13 16:35:16.208 +01:00 [INF] Hosting environment: Development
2025-04-13 16:35:16.210 +01:00 [INF] Content root path: C:\Users\USER\Desktop\MiniSupermarketSystem.API\MiniSupermarketSystem.API
2025-04-13 16:35:16.542 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-13 16:35:18.252 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1737.4911ms
2025-04-13 16:35:18.264 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-13 16:35:18.264 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-13 16:35:18.345 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 81.0921ms
2025-04-13 16:35:18.879 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 615.6357ms
2025-04-13 16:35:19.127 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-13 16:35:19.554 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 426.6595ms
2025-04-13 16:44:24.077 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-13 16:44:30.954 +01:00 [INF] Executed DbCommand (146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-13 16:44:31.252 +01:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-13 16:44:31.315 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-13 16:44:31.322 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-13 16:44:31.395 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-13 16:44:31.474 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-13 16:44:32.971 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-13 16:44:33.432 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-13 16:44:34.272 +01:00 [INF] Hosting environment: Development
2025-04-13 16:44:35.549 +01:00 [INF] Content root path: C:\Users\USER\Desktop\MiniSupermarketSystem.API\MiniSupermarketSystem.API
2025-04-13 16:44:36.166 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-13 16:44:37.253 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-13 16:44:37.253 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-13 16:44:37.262 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1128.2176ms
2025-04-13 16:44:37.312 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 53.4757ms
2025-04-13 16:44:37.614 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 361.1438ms
2025-04-13 16:44:37.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-13 16:44:38.032 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 196.1462ms
2025-04-13 16:45:48.485 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/3734fd0f-d35d-4b70-ab18-d2d455562ed4 - null null
2025-04-13 16:45:48.653 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-13 16:45:48.772 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-13 16:45:50.622 +01:00 [INF] Executed DbCommand (178ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-13 16:45:51.028 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-13 16:45:51.104 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 2312.1513ms
2025-04-13 16:45:51.111 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-13 16:45:51.130 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/3734fd0f-d35d-4b70-ab18-d2d455562ed4 - 200 null application/json; charset=utf-8 2645.3232ms
2025-04-13 16:46:10.041 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/3734fd0f-d35d-4b70-ab18-d2d455562ed4/verify - null 0
2025-04-13 16:46:10.056 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-13 16:46:10.074 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-13 16:46:10.157 +01:00 [INF] Start processing HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=3734fd0f-d35d-4b70-ab18-d2d455562ed4&apiKey=your-api-key-here
2025-04-13 16:46:10.162 +01:00 [INF] Sending HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=3734fd0f-d35d-4b70-ab18-d2d455562ed4&apiKey=your-api-key-here
2025-04-13 16:46:12.461 +01:00 [INF] Received HTTP response headers after 2280.4301ms - 404
2025-04-13 16:46:12.465 +01:00 [INF] End processing HTTP request after 2312.5546ms - 404
2025-04-13 16:46:12.474 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-13 16:46:12.487 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 2406.6063ms
2025-04-13 16:46:12.497 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-13 16:46:12.500 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/3734fd0f-d35d-4b70-ab18-d2d455562ed4/verify - 200 null application/json; charset=utf-8 2459.4978ms
2025-04-14 19:40:32.979 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 19:40:34.391 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 19:40:34.616 +01:00 [INF] Executed DbCommand (166ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 19:40:34.670 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 19:40:34.682 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 19:40:34.930 +01:00 [INF] Executed DbCommand (157ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 19:40:35.000 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 19:40:37.575 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 19:40:37.825 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 19:40:37.847 +01:00 [INF] Hosting environment: Development
2025-04-14 19:40:37.996 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 19:40:40.744 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 19:40:41.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 19:40:41.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 19:40:41.447 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 709.712ms
2025-04-14 19:40:41.483 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 44.9703ms
2025-04-14 19:40:41.774 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 336.9548ms
2025-04-14 19:40:41.905 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 19:40:42.040 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.7287ms
2025-04-14 19:41:33.858 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 19:41:33.970 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 19:41:34.018 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 19:41:34.952 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 19:41:35.177 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 19:41:35.247 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 1211.5068ms
2025-04-14 19:41:35.252 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 19:41:35.265 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 1407.4528ms
2025-04-14 19:41:50.394 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 19:41:50.405 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 19:41:50.438 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 19:41:51.158 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 19:41:51.252 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 19:41:51.258 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 19:41:52.313 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 1867.8175ms
2025-04-14 19:41:52.320 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 19:41:52.327 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Http.HttpRequestException: No such host is known. (testdev.coralpay.com:5000)
 ---> System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 81
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 67
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 26
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 62
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 19:41:52.549 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 2154.9242ms
2025-04-14 22:32:38.813 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 22:32:40.486 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:32:40.578 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:32:40.587 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:32:40.591 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:32:40.662 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 22:32:40.719 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 22:32:41.775 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 22:32:42.925 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 22:32:44.180 +01:00 [INF] Hosting environment: Development
2025-04-14 22:32:44.181 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 22:32:44.443 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:32:45.921 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:32:45.921 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:32:45.999 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1577.7365ms
2025-04-14 22:32:46.141 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 219.0986ms
2025-04-14 22:32:46.239 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 318.5612ms
2025-04-14 22:32:46.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:32:46.588 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.6002ms
2025-04-14 22:34:14.475 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 22:34:16.118 +01:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:34:16.211 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:34:16.222 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:34:16.229 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:34:16.306 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 22:34:16.374 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 22:34:17.457 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 22:34:19.325 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:34:19.325 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 22:34:19.645 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 22:34:20.253 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:34:20.527 +01:00 [INF] Hosting environment: Development
2025-04-14 22:34:20.594 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 22:34:20.746 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 22:34:21.346 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2034.8288ms
2025-04-14 22:34:21.543 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:34:21.543 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:34:21.565 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 22.7688ms
2025-04-14 22:34:21.744 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 201.4359ms
2025-04-14 22:34:22.183 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:34:22.457 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 273.1324ms
2025-04-14 22:34:23.110 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 22:34:23.360 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 22:34:23.423 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2632.5502ms
2025-04-14 22:34:23.433 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:34:23.453 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 4162.3316ms
2025-04-14 22:34:43.716 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 22:34:43.730 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 22:34:43.772 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:35:10.140 +01:00 [INF] Executed DbCommand (213ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 22:35:17.138 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 22:35:17.165 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 22:35:23.345 +01:00 [INF] Received HTTP response headers after 6152.7473ms - 200
2025-04-14 22:35:23.350 +01:00 [INF] End processing HTTP request after 6220.3546ms - 200
2025-04-14 22:35:38.314 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 22:35:38.326 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 22:35:43.109 +01:00 [INF] Received HTTP response headers after 4779.6555ms - 200
2025-04-14 22:35:43.112 +01:00 [INF] End processing HTTP request after 4798.1079ms - 200
2025-04-14 22:37:35.288 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 22:37:35.514 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-14 22:38:12.188 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 22:38:12.206 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:38:12.283 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 208503.5087ms
2025-04-14 22:38:12.288 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 22:38:12.292 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 499 null application/json; charset=utf-8 208575.9274ms
2025-04-14 22:38:29.444 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 22:38:29.462 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:38:29.466 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 22:38:29.484 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 22:38:29.491 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 22:38:29.495 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 23.7481ms
2025-04-14 22:38:29.501 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:38:29.504 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 60.7505ms
2025-04-14 22:38:49.009 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 22:38:49.018 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 22:38:49.023 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:38:55.178 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 22:39:00.291 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 22:39:00.302 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 22:39:01.048 +01:00 [INF] Received HTTP response headers after 741.9096ms - 200
2025-04-14 22:39:01.053 +01:00 [INF] End processing HTTP request after 761.7607ms - 200
2025-04-14 22:39:01.059 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 22:39:01.062 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 22:39:04.326 +01:00 [INF] Received HTTP response headers after 3260.191ms - 200
2025-04-14 22:39:04.334 +01:00 [INF] End processing HTTP request after 3274.9469ms - 200
2025-04-14 22:39:04.370 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 22:39:04.452 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderDetails] USING (
VALUES (@p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, 1),
(@p13, @p14, @p15, @p16, 2)) AS i ([OrderId], [ProductId], [Quantity], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([OrderId], [ProductId], [Quantity], [UnitPrice])
VALUES (i.[OrderId], i.[ProductId], i.[Quantity], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-04-14 22:39:04.489 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 22:39:04.502 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 22:39:04.521 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 22:39:04.530 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:39:04.543 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 15506.3344ms
2025-04-14 22:39:04.550 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 22:39:04.557 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 15548.2597ms
2025-04-14 22:42:06.227 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 22:42:08.262 +01:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:42:08.469 +01:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:42:08.488 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:42:08.496 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:42:08.616 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 22:42:08.695 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 22:42:09.848 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 22:42:10.074 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 22:42:10.081 +01:00 [INF] Hosting environment: Development
2025-04-14 22:42:10.083 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 22:42:11.856 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:42:12.736 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:42:12.736 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 896.2155ms
2025-04-14 22:42:12.758 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:42:12.805 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 72.7346ms
2025-04-14 22:42:12.996 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 238.4041ms
2025-04-14 22:42:13.157 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:42:13.333 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.1272ms
2025-04-14 22:42:21.962 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 22:42:22.091 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:42:22.137 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 22:42:23.002 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 22:42:23.317 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 22:42:23.399 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 1241.8534ms
2025-04-14 22:42:23.404 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 22:42:23.420 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 1458.6238ms
2025-04-14 22:42:47.560 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 22:42:47.575 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:42:47.611 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:42:48.360 +01:00 [INF] Executed DbCommand (54ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 22:42:48.525 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:42:48.549 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 933.0051ms
2025-04-14 22:42:48.554 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:42:48.559 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 998.6774ms
2025-04-14 22:43:35.661 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 22:43:35.670 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 22:43:35.681 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:43:35.749 +01:00 [INF] Start processing HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=02308c0a-2cad-4e6b-9cde-276e4108bc22&apiKey=your-api-key-here
2025-04-14 22:43:35.760 +01:00 [INF] Sending HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=02308c0a-2cad-4e6b-9cde-276e4108bc22&apiKey=your-api-key-here
2025-04-14 22:43:36.566 +01:00 [INF] Received HTTP response headers after 789.2224ms - 404
2025-04-14 22:43:36.579 +01:00 [INF] End processing HTTP request after 837.6096ms - 404
2025-04-14 22:43:36.591 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-14 22:43:36.612 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 924.8936ms
2025-04-14 22:43:36.631 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 22:43:36.642 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 200 null application/json; charset=utf-8 981.0386ms
2025-04-14 22:44:48.693 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:44:52.215 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 3522.8545ms
2025-04-14 22:45:02.642 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:45:02.642 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:45:02.748 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 105.6058ms
2025-04-14 22:45:05.356 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 2713.9403ms
2025-04-14 22:45:06.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:45:09.625 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2897.8662ms
2025-04-14 22:45:18.913 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 22:45:19.815 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:45:19.832 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:45:20.721 +01:00 [INF] Executed DbCommand (571ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 22:45:21.578 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:45:21.587 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1745.2179ms
2025-04-14 22:45:21.596 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:45:21.602 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 2688.6822ms
2025-04-14 22:46:40.424 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:46:42.241 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1841.164ms
2025-04-14 22:46:44.035 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:46:42.735 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:46:45.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1783.7581ms
2025-04-14 22:46:46.609 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 22:46:47.497 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 4762.1341ms
2025-04-14 22:46:47.509 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:46:47.520 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:46:48.095 +01:00 [INF] Executed DbCommand (539ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 22:46:48.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:46:48.789 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:46:48.967 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1429.6675ms
2025-04-14 22:46:48.970 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:46:48.984 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 2375.7093ms
2025-04-14 22:46:49.055 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 892.7954ms
2025-04-14 22:48:16.056 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 22:48:17.625 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:48:17.724 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:48:17.736 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 22:48:17.743 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 22:48:17.798 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 22:48:17.859 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 22:48:18.629 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 22:48:18.962 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 22:48:19.420 +01:00 [INF] Hosting environment: Development
2025-04-14 22:48:19.430 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 22:48:20.925 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 22:48:22.156 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 22:48:22.156 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1220.0578ms
2025-04-14 22:48:22.334 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 178.1186ms
2025-04-14 22:48:22.682 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 22:48:22.702 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 20.2418ms
2025-04-14 22:48:22.933 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 22:48:23.012 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.0041ms
2025-04-14 22:48:56.839 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 22:48:56.957 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:48:57.027 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:48:58.327 +01:00 [INF] Executed DbCommand (116ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 22:48:58.728 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 22:48:58.798 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1751.7985ms
2025-04-14 22:48:58.807 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 22:48:58.848 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 2009.6144ms
2025-04-14 22:49:09.239 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 22:49:09.253 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 22:49:09.277 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 22:49:50.142 +01:00 [INF] Start processing HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=02308c0a-2cad-4e6b-9cde-276e4108bc22&apiKey=your-api-key-here
2025-04-14 22:49:50.150 +01:00 [INF] Sending HTTP request GET https://testdev.coralpay.com:5000/BankLinkService//verify-payment?reference=02308c0a-2cad-4e6b-9cde-276e4108bc22&apiKey=your-api-key-here
2025-04-14 22:49:50.990 +01:00 [INF] Received HTTP response headers after 819.5366ms - 404
2025-04-14 22:49:51.000 +01:00 [INF] End processing HTTP request after 864.3307ms - 404
2025-04-14 23:09:23.784 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 23:09:25.647 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:09:25.756 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:09:25.775 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:09:25.782 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:09:25.849 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 23:09:25.892 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 23:09:26.667 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 23:09:27.009 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 23:09:27.020 +01:00 [INF] Hosting environment: Development
2025-04-14 23:09:27.022 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 23:09:28.089 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 23:09:28.988 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 23:09:28.988 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 23:09:28.991 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 884.1652ms
2025-04-14 23:09:29.943 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 959.9621ms
2025-04-14 23:09:30.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1133.2124ms
2025-04-14 23:09:30.336 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 23:09:30.475 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.4611ms
2025-04-14 23:10:20.278 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 23:10:21.966 +01:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:10:22.113 +01:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:10:22.124 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:10:22.145 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:10:22.235 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 23:10:22.298 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 23:10:23.070 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 23:10:23.312 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 23:10:23.323 +01:00 [INF] Hosting environment: Development
2025-04-14 23:10:23.326 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 23:10:24.934 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 23:10:26.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 23:10:26.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 23:10:26.549 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1634.2487ms
2025-04-14 23:10:26.598 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 60.9251ms
2025-04-14 23:10:26.785 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 249.5204ms
2025-04-14 23:10:26.961 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 23:10:27.150 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.2089ms
2025-04-14 23:10:43.309 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:10:43.399 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:10:43.467 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:10:44.674 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:10:45.043 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:10:45.108 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1620.1503ms
2025-04-14 23:10:45.114 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:10:45.131 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 1822.7714ms
2025-04-14 23:10:53.270 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:10:53.280 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:10:53.299 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:11:01.902 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:11:01.909 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:11:03.188 +01:00 [INF] Received HTTP response headers after 1264.0557ms - 200
2025-04-14 23:11:03.209 +01:00 [INF] End processing HTTP request after 1310.7567ms - 200
2025-04-14 23:11:14.719 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:11:14.729 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:11:14.927 +01:00 [INF] Received HTTP response headers after 194.2681ms - 200
2025-04-14 23:11:14.930 +01:00 [INF] End processing HTTP request after 210.749ms - 200
2025-04-14 23:11:29.625 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 36318.8234ms
2025-04-14 23:11:29.631 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:11:29.638 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: The JSON value could not be converted to System.DateTime. Path: $.paymentDate | LineNumber: 0 | BytePositionInLine: 495.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'Null' as a string.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedString(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDateTime(DateTime& value)
   at System.Text.Json.Utf8JsonReader.GetDateTime()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.VerifyPayment(String referenceId) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 122
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 26
   at MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 49
   at lambda_method132(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 23:11:29.980 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 500 null text/plain; charset=utf-8 36710.7624ms
2025-04-14 23:13:06.922 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:13:06.932 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:13:06.934 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:13:07.120 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:13:07.134 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:13:07.139 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 200.2183ms
2025-04-14 23:13:07.145 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:13:07.149 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 226.7541ms
2025-04-14 23:13:16.288 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:13:16.315 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:13:16.337 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:13:25.491 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:13:25.508 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:13:26.166 +01:00 [INF] Received HTTP response headers after 655.4872ms - 200
2025-04-14 23:13:26.170 +01:00 [INF] End processing HTTP request after 679.5345ms - 200
2025-04-14 23:13:30.906 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:13:30.918 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:13:31.128 +01:00 [INF] Received HTTP response headers after 206.4152ms - 200
2025-04-14 23:13:31.145 +01:00 [INF] End processing HTTP request after 238.317ms - 200
2025-04-14 23:14:04.190 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 47848.2858ms
2025-04-14 23:14:04.199 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:14:04.206 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: The JSON value could not be converted to System.DateTime. Path: $.paymentDate | LineNumber: 0 | BytePositionInLine: 495.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'Null' as a string.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedString(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDateTime(DateTime& value)
   at System.Text.Json.Utf8JsonReader.GetDateTime()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.VerifyPayment(String referenceId)
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 26
   at MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 49
   at lambda_method132(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 23:14:04.270 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 500 null text/plain; charset=utf-8 47981.8239ms
2025-04-14 23:14:43.980 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:14:43.991 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:14:44.010 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:14:48.592 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:14:48.612 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:14:48.631 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 4614.9549ms
2025-04-14 23:14:48.659 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:14:48.663 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 4682.7666ms
2025-04-14 23:14:54.342 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:14:54.361 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:14:54.374 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:15:04.465 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:15:04.474 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:15:05.448 +01:00 [INF] Received HTTP response headers after 970.1288ms - 200
2025-04-14 23:15:05.525 +01:00 [INF] End processing HTTP request after 1060.0444ms - 200
2025-04-14 23:15:07.719 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:15:07.722 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:15:07.903 +01:00 [INF] Received HTTP response headers after 177.3716ms - 200
2025-04-14 23:15:07.907 +01:00 [INF] End processing HTTP request after 188.0487ms - 200
2025-04-14 23:15:40.786 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 46407.3948ms
2025-04-14 23:15:40.838 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:15:40.843 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: The JSON value could not be converted to System.DateTime. Path: $.paymentDate | LineNumber: 0 | BytePositionInLine: 495.
 ---> System.InvalidOperationException: Cannot get the value of a token type 'Null' as a string.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_ExpectedString(JsonTokenType tokenType)
   at System.Text.Json.Utf8JsonReader.TryGetDateTime(DateTime& value)
   at System.Text.Json.Utf8JsonReader.GetDateTime()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.VerifyPayment(String referenceId)
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 26
   at MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 49
   at lambda_method148(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 23:15:40.963 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 500 null text/plain; charset=utf-8 46621.6914ms
2025-04-14 23:23:44.320 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 23:23:45.630 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:23:45.705 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:23:45.717 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:23:45.725 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:23:45.772 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 23:23:45.820 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 23:23:47.225 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 23:23:47.660 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 23:23:47.666 +01:00 [INF] Hosting environment: Development
2025-04-14 23:23:47.673 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 23:23:48.769 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 23:23:49.390 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 23:23:49.395 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 640.6117ms
2025-04-14 23:23:49.438 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 23:23:50.411 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1021.0282ms
2025-04-14 23:23:50.436 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 997.523ms
2025-04-14 23:23:50.573 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 23:23:50.773 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.7256ms
2025-04-14 23:23:54.849 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:23:54.956 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:23:55.030 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:23:56.185 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:23:56.465 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:23:56.556 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1506.9122ms
2025-04-14 23:23:56.562 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:23:56.580 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 1731.1418ms
2025-04-14 23:24:02.110 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:24:02.121 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:24:02.140 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:24:09.504 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:24:09.511 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:24:10.319 +01:00 [INF] Received HTTP response headers after 797.0594ms - 200
2025-04-14 23:24:10.325 +01:00 [INF] End processing HTTP request after 824.2484ms - 200
2025-04-14 23:24:18.825 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:24:18.832 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:24:19.136 +01:00 [INF] Received HTTP response headers after 299.587ms - 200
2025-04-14 23:24:19.144 +01:00 [INF] End processing HTTP request after 318.1304ms - 200
2025-04-14 23:24:24.790 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 22643.9478ms
2025-04-14 23:24:24.795 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:24:24.802 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Error converting value {null} to type 'System.DateTime'. Path 'paymentDate', line 1, position 495.
 ---> System.InvalidCastException: Null object cannot be converted to a value type.
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.VerifyPayment(String referenceId) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 125
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 26
   at MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 49
   at lambda_method132(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 23:24:24.947 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 500 null text/plain; charset=utf-8 22836.9005ms
2025-04-14 23:24:43.367 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:24:43.378 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:24:43.383 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:24:49.419 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:24:49.435 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:24:49.441 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 6050.2924ms
2025-04-14 23:24:49.450 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:24:49.455 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 6087.7675ms
2025-04-14 23:24:56.299 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:24:56.309 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:24:56.312 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:25:02.311 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:25:02.328 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:25:02.518 +01:00 [INF] Received HTTP response headers after 187.2167ms - 200
2025-04-14 23:25:02.526 +01:00 [INF] End processing HTTP request after 215.0641ms - 200
2025-04-14 23:25:08.379 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:25:08.386 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:25:08.567 +01:00 [INF] Received HTTP response headers after 174.7115ms - 200
2025-04-14 23:25:08.575 +01:00 [INF] End processing HTTP request after 195.655ms - 200
2025-04-14 23:27:21.821 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 23:27:23.470 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:27:23.567 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:27:23.578 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:27:23.583 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:27:23.629 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 23:27:23.674 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 23:27:24.455 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 23:27:24.677 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 23:27:24.681 +01:00 [INF] Hosting environment: Development
2025-04-14 23:27:24.683 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 23:27:25.409 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 23:27:27.179 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1794.1206ms
2025-04-14 23:27:27.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 23:27:27.345 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 23:27:27.403 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 57.8595ms
2025-04-14 23:27:27.582 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 236.1838ms
2025-04-14 23:27:27.736 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 23:27:27.860 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.0913ms
2025-04-14 23:27:34.600 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - null null
2025-04-14 23:27:34.689 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:27:34.793 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:27:36.041 +01:00 [INF] Executed DbCommand (92ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:27:36.316 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:27:36.373 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1560.3958ms
2025-04-14 23:27:36.378 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:27:36.393 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22 - 200 null application/json; charset=utf-8 1793.229ms
2025-04-14 23:27:41.922 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - null 0
2025-04-14 23:27:41.933 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:27:41.949 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:27:45.853 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:27:45.860 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:27:46.875 +01:00 [INF] Received HTTP response headers after 997.5757ms - 200
2025-04-14 23:27:46.892 +01:00 [INF] End processing HTTP request after 1042.854ms - 200
2025-04-14 23:27:49.217 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:27:49.223 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:27:49.472 +01:00 [INF] Received HTTP response headers after 243.7571ms - 200
2025-04-14 23:27:49.482 +01:00 [INF] End processing HTTP request after 265.0911ms - 200
2025-04-14 23:28:15.457 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-14 23:28:15.472 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 33516.3979ms
2025-04-14 23:28:15.476 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:28:15.481 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/02308c0a-2cad-4e6b-9cde-276e4108bc22/verify - 200 null application/json; charset=utf-8 33559.9155ms
2025-04-14 23:28:38.320 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 23:28:38.327 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:28:38.339 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 23:28:38.525 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 23:28:38.535 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 23:28:38.546 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 200.5552ms
2025-04-14 23:28:38.550 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:28:38.555 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 235.3893ms
2025-04-14 23:28:52.464 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 23:28:52.471 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:28:52.482 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:28:57.937 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 23:28:57.948 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:28:57.952 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:28:58.416 +01:00 [INF] Received HTTP response headers after 461.103ms - 200
2025-04-14 23:28:58.419 +01:00 [INF] End processing HTTP request after 471.3885ms - 200
2025-04-14 23:28:58.479 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:28:58.483 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:29:02.246 +01:00 [INF] Received HTTP response headers after 3759.0671ms - 200
2025-04-14 23:29:02.249 +01:00 [INF] End processing HTTP request after 3770.5179ms - 200
2025-04-14 23:29:02.701 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 23:29:02.773 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-14 23:29:02.835 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 23:29:02.850 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:29:02.903 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 10414.3082ms
2025-04-14 23:29:02.908 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:29:02.912 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 10448.2377ms
2025-04-14 23:33:53.930 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 23:33:53.947 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:33:53.951 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 23:33:54.013 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 23:33:54.020 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 23:33:54.024 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 66.1298ms
2025-04-14 23:33:54.029 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:33:54.034 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 112.2665ms
2025-04-14 23:34:02.041 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 23:34:02.050 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:34:02.054 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:34:02.088 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 23:34:02.097 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:34:02.101 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:34:02.732 +01:00 [INF] Received HTTP response headers after 628.4421ms - 200
2025-04-14 23:34:02.738 +01:00 [INF] End processing HTTP request after 641.5865ms - 200
2025-04-14 23:34:09.716 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:34:09.725 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:34:12.378 +01:00 [INF] Received HTTP response headers after 2650.7338ms - 200
2025-04-14 23:34:12.383 +01:00 [INF] End processing HTTP request after 2666.9789ms - 200
2025-04-14 23:34:43.930 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 23:34:43.947 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-14 23:34:43.968 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 23:34:43.976 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:34:43.983 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 41924.1612ms
2025-04-14 23:34:43.987 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:34:43.991 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 41949.6919ms
2025-04-14 23:54:29.823 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-14 23:54:31.520 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:54:31.653 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:54:31.665 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-14 23:54:31.685 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-14 23:54:31.749 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-14 23:54:31.803 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-14 23:54:32.603 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-14 23:54:32.769 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-14 23:54:32.771 +01:00 [INF] Hosting environment: Development
2025-04-14 23:54:32.774 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-14 23:54:34.056 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-14 23:54:34.743 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 702.0738ms
2025-04-14 23:54:34.745 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-14 23:54:34.750 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-14 23:54:34.797 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 45.4594ms
2025-04-14 23:54:35.842 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1097.1321ms
2025-04-14 23:54:36.023 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-14 23:54:36.206 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.278ms
2025-04-14 23:54:38.705 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/4 - null null
2025-04-14 23:54:38.818 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:54:38.877 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:54:40.065 +01:00 [INF] Executed DbCommand (91ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:54:40.129 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-14 23:54:40.188 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 1294.6833ms
2025-04-14 23:54:40.194 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:54:40.208 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/4 - 404 null application/problem+json; charset=utf-8 1503.9513ms
2025-04-14 23:54:44.147 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 23:54:44.159 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:54:44.180 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 23:54:44.397 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 23:54:44.525 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 23:54:44.546 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 359.5015ms
2025-04-14 23:54:44.556 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:54:44.564 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 416.6523ms
2025-04-14 23:54:51.364 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 23:54:51.371 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:54:51.383 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:54:51.501 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 23:54:54.523 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:54:54.529 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:54:55.417 +01:00 [INF] Received HTTP response headers after 875.9119ms - 200
2025-04-14 23:54:55.431 +01:00 [INF] End processing HTTP request after 913.0522ms - 200
2025-04-14 23:55:04.500 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:55:04.521 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:55:10.115 +01:00 [INF] Received HTTP response headers after 5590.5914ms - 200
2025-04-14 23:55:10.119 +01:00 [INF] End processing HTTP request after 5619.3521ms - 200
2025-04-14 23:55:25.214 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 23:55:25.294 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-14 23:55:25.370 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 23:55:25.386 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:55:25.439 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 34048.7468ms
2025-04-14 23:55:25.444 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:55:25.448 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 34083.9875ms
2025-04-14 23:56:47.485 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92 - null null
2025-04-14 23:56:47.493 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:56:47.496 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:56:47.529 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-14 23:56:47.555 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:56:47.559 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 55.9732ms
2025-04-14 23:56:47.562 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-14 23:56:47.566 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92 - 200 null application/json; charset=utf-8 84.6306ms
2025-04-14 23:56:54.382 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92/verify - null 0
2025-04-14 23:56:54.390 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:56:54.401 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:57:01.009 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:57:01.013 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:57:02.307 +01:00 [INF] Received HTTP response headers after 1290.3628ms - 200
2025-04-14 23:57:02.311 +01:00 [INF] End processing HTTP request after 1301.8946ms - 200
2025-04-14 23:57:12.613 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:57:12.621 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-14 23:57:12.825 +01:00 [INF] Received HTTP response headers after 201.5152ms - 200
2025-04-14 23:57:12.829 +01:00 [INF] End processing HTTP request after 215.406ms - 200
2025-04-14 23:57:51.714 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-14 23:57:51.739 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 57332.2332ms
2025-04-14 23:57:51.743 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-14 23:57:51.747 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92/verify - 200 null application/json; charset=utf-8 57364.9833ms
2025-04-14 23:58:53.543 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 23:58:53.561 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:58:53.564 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 23:58:53.585 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 23:58:53.592 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 23:58:53.596 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 26.6209ms
2025-04-14 23:58:53.600 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:58:53.604 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 60.8161ms
2025-04-14 23:59:03.829 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 23:59:03.835 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:59:03.838 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:59:03.863 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 23:59:04.025 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 179.2072ms
2025-04-14 23:59:04.032 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:59:04.036 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Product with ID 3 not found
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 42
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method73(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-14 23:59:04.185 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 356.08ms
2025-04-14 23:59:17.978 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-14 23:59:17.984 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:59:17.988 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-14 23:59:18.010 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-14 23:59:18.016 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-14 23:59:18.021 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 26.8763ms
2025-04-14 23:59:18.024 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-14 23:59:18.028 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 50.9305ms
2025-04-14 23:59:24.665 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-14 23:59:24.671 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:59:24.674 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-14 23:59:24.694 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-14 23:59:24.701 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:59:24.704 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-14 23:59:25.264 +01:00 [INF] Received HTTP response headers after 557.0177ms - 200
2025-04-14 23:59:25.273 +01:00 [INF] End processing HTTP request after 571.1278ms - 200
2025-04-14 23:59:28.127 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:59:28.131 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-14 23:59:28.567 +01:00 [INF] Received HTTP response headers after 428.8171ms - 200
2025-04-14 23:59:28.614 +01:00 [INF] End processing HTTP request after 487.4058ms - 200
2025-04-14 23:59:28.636 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-14 23:59:28.663 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-14 23:59:28.689 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-14 23:59:28.697 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-14 23:59:28.702 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 4020.3417ms
2025-04-14 23:59:28.707 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-14 23:59:28.712 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 4046.703ms
2025-04-15 00:05:22.543 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92 - null null
2025-04-15 00:05:22.561 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 00:05:22.564 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 00:05:22.630 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 00:05:22.639 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 00:05:22.643 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 72.4008ms
2025-04-15 00:05:22.647 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 00:05:22.651 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92 - 200 null application/json; charset=utf-8 108.5114ms
2025-04-15 00:05:53.511 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92/verify - null 0
2025-04-15 00:05:53.531 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 00:05:53.535 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 00:05:54.759 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 00:05:54.771 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 00:05:55.315 +01:00 [INF] Received HTTP response headers after 541.2775ms - 200
2025-04-15 00:05:55.322 +01:00 [INF] End processing HTTP request after 562.4879ms - 200
2025-04-15 00:05:57.018 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 00:05:57.064 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 00:05:57.677 +01:00 [INF] Received HTTP response headers after 609.6934ms - 200
2025-04-15 00:05:57.694 +01:00 [INF] End processing HTTP request after 676.1273ms - 200
2025-04-15 00:05:57.705 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-15 00:05:57.711 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 4169.104ms
2025-04-15 00:05:57.715 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 00:05:57.719 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/bf0ad3dc-a80c-45f0-a0bd-4b2668ee3e92/verify - 200 null application/json; charset=utf-8 4208.9711ms
2025-04-15 12:36:43.237 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 12:36:44.957 +01:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:36:45.073 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:36:45.087 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:36:45.094 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:36:45.225 +01:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 12:36:45.288 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 12:36:46.487 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 12:36:46.828 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 12:36:46.940 +01:00 [INF] Hosting environment: Development
2025-04-15 12:36:46.943 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 12:36:49.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:36:50.207 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:36:50.207 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:36:50.215 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1146.2292ms
2025-04-15 12:36:50.293 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 86.6821ms
2025-04-15 12:36:50.467 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 260.2694ms
2025-04-15 12:36:50.676 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:36:50.811 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.6496ms
2025-04-15 12:37:08.751 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:37:08.942 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:37:09.063 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:37:10.151 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:37:10.441 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:37:10.527 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 1435.9483ms
2025-04-15 12:37:10.534 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:37:10.554 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 1803.5184ms
2025-04-15 12:37:21.328 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:37:21.339 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:37:21.373 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:37:22.774 +01:00 [INF] Executed DbCommand (77ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:37:22.879 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:37:22.888 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:37:32.109 +01:00 [INF] Received HTTP response headers after 9209.5699ms - 200
2025-04-15 12:37:32.115 +01:00 [INF] End processing HTTP request after 9244.3818ms - 200
2025-04-15 12:38:36.063 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:38:36.145 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:38:44.872 +01:00 [INF] Received HTTP response headers after 8723.5187ms - 200
2025-04-15 12:38:44.882 +01:00 [INF] End processing HTTP request after 8820.4108ms - 200
2025-04-15 12:38:46.007 +01:00 [ERR] Failed executing DbCommand (91ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:38:46.271 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:38:47.232 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 85848.7197ms
2025-04-15 12:38:47.260 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:38:47.270 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:38:47.795 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 86466.5639ms
2025-04-15 12:39:12.146 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:39:12.156 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:39:12.160 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:39:12.219 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:39:12.233 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:39:12.243 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 69.2818ms
2025-04-15 12:39:12.248 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:39:12.258 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 112.0983ms
2025-04-15 12:39:22.013 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:39:22.027 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:39:22.038 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:39:22.117 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:39:22.128 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:39:22.131 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:39:22.222 +01:00 [INF] Received HTTP response headers after 80.2629ms - 200
2025-04-15 12:39:22.226 +01:00 [INF] End processing HTTP request after 97.5067ms - 200
2025-04-15 12:39:26.253 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:39:26.260 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:39:26.379 +01:00 [INF] Received HTTP response headers after 116.4145ms - 200
2025-04-15 12:39:26.386 +01:00 [INF] End processing HTTP request after 132.3543ms - 200
2025-04-15 12:39:26.416 +01:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:39:26.440 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:39:27.499 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 5432.3803ms
2025-04-15 12:39:27.510 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:39:27.520 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:39:27.678 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 5664.6595ms
2025-04-15 12:39:45.928 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:39:45.937 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:39:45.941 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:39:45.974 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:39:45.983 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:39:45.992 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 42.9471ms
2025-04-15 12:39:45.997 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:39:46.006 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 78.836ms
2025-04-15 12:39:56.466 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:39:56.499 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:39:56.507 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:39:56.694 +01:00 [INF] Executed DbCommand (164ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:39:56.721 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:39:56.726 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:39:56.757 +01:00 [INF] Received HTTP response headers after 21.1934ms - 200
2025-04-15 12:39:56.770 +01:00 [INF] End processing HTTP request after 49.0492ms - 200
2025-04-15 12:40:08.302 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:40:08.309 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:40:08.499 +01:00 [INF] Received HTTP response headers after 185.6185ms - 200
2025-04-15 12:40:08.515 +01:00 [INF] End processing HTTP request after 213.4735ms - 200
2025-04-15 12:40:42.621 +01:00 [ERR] Failed executing DbCommand (75ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:40:42.644 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:40:43.724 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 47202.5348ms
2025-04-15 12:40:43.736 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:40:43.749 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:40:43.900 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 47435.1425ms
2025-04-15 12:42:06.245 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:42:06.275 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 29.9235ms
2025-04-15 12:42:06.368 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:42:06.372 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:42:06.866 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 498.3209ms
2025-04-15 12:42:07.084 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 712.4151ms
2025-04-15 12:42:07.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:42:07.598 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.0866ms
2025-04-15 12:42:16.779 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:42:16.786 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:42:16.804 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:42:16.829 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:42:16.840 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:42:16.858 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 43.8648ms
2025-04-15 12:42:16.865 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:42:16.870 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 91.3252ms
2025-04-15 12:42:23.810 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:42:23.826 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:42:23.858 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:42:24.054 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:42:24.176 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:42:24.183 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:42:24.351 +01:00 [INF] Received HTTP response headers after 158.6033ms - 200
2025-04-15 12:42:24.356 +01:00 [INF] End processing HTTP request after 180.0312ms - 200
2025-04-15 12:42:28.050 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:42:28.056 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:42:28.162 +01:00 [INF] Received HTTP response headers after 101.8723ms - 200
2025-04-15 12:42:28.179 +01:00 [INF] End processing HTTP request after 128.5056ms - 200
2025-04-15 12:42:33.290 +01:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:42:33.925 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:42:35.738 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 11776.8101ms
2025-04-15 12:42:35.744 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:42:35.750 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken)
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method250(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:42:35.918 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 12107.7001ms
2025-04-15 12:43:17.838 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:43:17.864 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 26.5427ms
2025-04-15 12:43:17.915 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:43:17.923 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:43:17.936 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 15.2668ms
2025-04-15 12:43:18.040 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 125.1783ms
2025-04-15 12:43:18.793 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:43:18.865 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.185ms
2025-04-15 12:43:29.317 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:43:29.326 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:43:29.344 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:43:29.370 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:43:29.381 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:43:29.394 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 39.1808ms
2025-04-15 12:43:29.399 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:43:29.405 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 87.5591ms
2025-04-15 12:43:36.425 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:43:36.437 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:43:36.459 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:43:36.500 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:43:36.513 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:43:36.519 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:43:36.542 +01:00 [INF] Received HTTP response headers after 19.0396ms - 200
2025-04-15 12:43:36.545 +01:00 [INF] End processing HTTP request after 32.7054ms - 200
2025-04-15 12:43:39.764 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:43:39.804 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:43:39.888 +01:00 [INF] Received HTTP response headers after 75.0039ms - 200
2025-04-15 12:43:40.543 +01:00 [INF] End processing HTTP request after 779.4982ms - 200
2025-04-15 12:43:45.132 +01:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:43:46.140 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:43:47.083 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 10608.4143ms
2025-04-15 12:43:47.123 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:43:47.133 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:84297e07-daaf-40ae-bbe2-fb5384f59af2
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken)
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method266(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:43:47.381 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 10955.7328ms
2025-04-15 12:45:02.325 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 12:45:04.380 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:45:04.581 +01:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:45:04.595 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:45:04.602 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:45:04.701 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 12:45:04.769 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 12:45:06.011 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 12:45:06.389 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 12:45:06.433 +01:00 [INF] Hosting environment: Development
2025-04-15 12:45:06.448 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 12:45:08.404 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:45:09.382 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1002.2627ms
2025-04-15 12:45:09.425 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:45:09.430 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:45:09.545 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 120.4199ms
2025-04-15 12:45:09.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 341.7814ms
2025-04-15 12:45:09.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:45:10.149 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.9409ms
2025-04-15 12:45:17.948 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:45:18.196 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:45:18.286 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:45:19.367 +01:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:45:19.649 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:45:19.736 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 1426.4809ms
2025-04-15 12:45:19.743 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:45:19.762 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 1814.7729ms
2025-04-15 12:45:32.398 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:45:32.411 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:45:32.417 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:45:32.695 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:45:32.712 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:45:32.721 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 291.266ms
2025-04-15 12:45:32.727 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:45:32.735 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 337.4997ms
2025-04-15 12:45:45.267 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:45:45.275 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:45:45.316 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:45:46.096 +01:00 [INF] Executed DbCommand (107ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:45:46.320 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:45:46.340 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:45:46.620 +01:00 [INF] Received HTTP response headers after 252.7172ms - 200
2025-04-15 12:45:46.632 +01:00 [INF] End processing HTTP request after 321.5467ms - 200
2025-04-15 12:45:51.517 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:45:51.842 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:45:51.952 +01:00 [INF] Received HTTP response headers after 105.0694ms - 200
2025-04-15 12:45:51.956 +01:00 [INF] End processing HTTP request after 438.6945ms - 200
2025-04-15 12:46:00.009 +01:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:46:00.307 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:46:01.783 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 16458.0956ms
2025-04-15 12:46:01.791 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:46:01.800 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:46:01.982 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 16714.641ms
2025-04-15 12:46:35.319 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:46:35.328 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:46:35.331 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:46:40.042 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:46:40.057 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:46:40.083 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 4739.448ms
2025-04-15 12:46:40.132 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:46:40.139 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 4820.5553ms
2025-04-15 12:46:47.939 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:46:47.945 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:46:47.950 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:46:48.024 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:46:48.054 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:46:48.078 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:46:48.102 +01:00 [INF] Received HTTP response headers after 19.321ms - 200
2025-04-15 12:46:48.106 +01:00 [INF] End processing HTTP request after 51.3745ms - 200
2025-04-15 12:46:51.742 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:46:51.912 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:46:52.045 +01:00 [INF] Received HTTP response headers after 91.2477ms - 200
2025-04-15 12:46:52.055 +01:00 [INF] End processing HTTP request after 313.0316ms - 200
2025-04-15 12:46:54.549 +01:00 [ERR] Failed executing DbCommand (43ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:46:54.650 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:46:56.978 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 9018.9239ms
2025-04-15 12:46:57.013 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:46:57.125 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:46:57.727 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 9787.2318ms
2025-04-15 12:47:12.132 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:47:12.140 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:47:12.149 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:47:12.182 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:47:12.198 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:47:12.209 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 43.189ms
2025-04-15 12:47:12.214 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:47:12.224 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 92.2476ms
2025-04-15 12:47:23.466 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:47:23.473 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:47:23.478 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:47:23.508 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:47:23.518 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:47:23.523 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:47:23.559 +01:00 [INF] Received HTTP response headers after 31.5304ms - 200
2025-04-15 12:47:23.562 +01:00 [INF] End processing HTTP request after 43.8389ms - 200
2025-04-15 12:47:27.402 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:47:27.407 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:47:27.487 +01:00 [INF] Received HTTP response headers after 76.3876ms - 200
2025-04-15 12:47:27.490 +01:00 [INF] End processing HTTP request after 88.3117ms - 200
2025-04-15 12:48:35.260 +01:00 [ERR] Failed executing DbCommand (100ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:48:35.314 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:48:36.599 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 73112.7519ms
2025-04-15 12:48:36.605 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:48:36.614 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:48:36.783 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 73317.3137ms
2025-04-15 12:48:51.060 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:48:51.069 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:48:51.079 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:48:51.106 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:48:51.118 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:48:51.134 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 46.2724ms
2025-04-15 12:48:51.152 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:48:51.161 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 100.5492ms
2025-04-15 12:48:58.331 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:48:58.436 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:48:58.441 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:48:58.497 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:48:58.518 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:48:58.523 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:48:58.838 +01:00 [INF] Received HTTP response headers after 304.6446ms - 200
2025-04-15 12:48:58.984 +01:00 [INF] End processing HTTP request after 465.4811ms - 200
2025-04-15 12:49:04.804 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:49:04.816 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:49:04.886 +01:00 [INF] Received HTTP response headers after 60.9143ms - 200
2025-04-15 12:49:04.892 +01:00 [INF] End processing HTTP request after 88.4024ms - 200
2025-04-15 12:49:06.417 +01:00 [ERR] Failed executing DbCommand (81ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:49:06.523 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:49:07.596 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 9134.9056ms
2025-04-15 12:49:07.619 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:49:07.627 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:49:07.789 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 9458.1288ms
2025-04-15 12:49:43.137 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:49:43.143 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:49:43.148 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:49:43.172 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:49:43.181 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:49:43.188 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 31.0956ms
2025-04-15 12:49:43.199 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:49:43.205 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 68.0616ms
2025-04-15 12:50:04.096 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:50:04.387 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:50:04.409 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:50:04.493 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:50:04.589 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:50:04.592 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:50:04.788 +01:00 [INF] Received HTTP response headers after 187.9061ms - 200
2025-04-15 12:50:04.791 +01:00 [INF] End processing HTTP request after 201.0779ms - 200
2025-04-15 12:50:15.573 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:50:15.687 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:50:16.169 +01:00 [INF] Received HTTP response headers after 479.532ms - 200
2025-04-15 12:50:16.308 +01:00 [INF] End processing HTTP request after 735.0953ms - 200
2025-04-15 12:51:16.578 +01:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountName], [BankAccountNumber], [BankName], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-15 12:51:16.602 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 12:51:17.275 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 72843.8222ms
2025-04-15 12:51:17.281 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:51:17.290 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'BankAccountName'.
Invalid column name 'BankName'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:027d5698-b9f1-4b77-9ac0-a2d6d5e70ab0
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.CreateOrderAsync(Order order) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 78
   at MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder(CreateOrderCommand command) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 25
   at lambda_method52(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-15 12:51:17.449 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 73353.3396ms
2025-04-15 12:56:15.723 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 12:56:17.590 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:56:17.674 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:56:17.684 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 12:56:17.690 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 12:56:17.746 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 12:56:17.803 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 12:56:18.791 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 12:56:19.172 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 12:56:19.177 +01:00 [INF] Hosting environment: Development
2025-04-15 12:56:19.180 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 12:56:20.871 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:56:21.919 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:56:21.947 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 989.6567ms
2025-04-15 12:56:21.947 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:56:22.079 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 160.4321ms
2025-04-15 12:56:22.349 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 401.8645ms
2025-04-15 12:56:22.562 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:56:22.792 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.2771ms
2025-04-15 12:57:52.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 12:57:52.229 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 161.9979ms
2025-04-15 12:57:52.466 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 12:57:52.708 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:57:52.827 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 12:57:52.883 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 12:57:52.885 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 12:57:52.963 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 78.595ms
2025-04-15 12:57:53.113 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 230.5191ms
2025-04-15 12:57:54.554 +01:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 12:57:54.830 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 12:57:54.900 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2046.1552ms
2025-04-15 12:57:54.908 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 12:57:54.963 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 2497.2137ms
2025-04-15 12:57:55.027 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 12:57:55.075 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.1545ms
2025-04-15 12:59:13.754 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 12:59:13.794 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 12:59:13.839 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 12:59:14.705 +01:00 [INF] Executed DbCommand (185ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 12:59:14.795 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:59:14.805 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 12:59:14.974 +01:00 [INF] Received HTTP response headers after 152.2193ms - 200
2025-04-15 12:59:14.992 +01:00 [INF] End processing HTTP request after 203.1794ms - 200
2025-04-15 12:59:18.758 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:59:18.771 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 12:59:18.856 +01:00 [INF] Received HTTP response headers after 81.4119ms - 200
2025-04-15 12:59:18.859 +01:00 [INF] End processing HTTP request after 100.486ms - 200
2025-04-15 13:00:07.786 +01:00 [INF] Executed DbCommand (164ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-15 13:00:08.004 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-15 13:00:16.940 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-15 13:00:16.973 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 13:00:17.070 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 63220.9812ms
2025-04-15 13:00:17.076 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 13:00:17.087 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 63332.5137ms
2025-04-15 13:03:23.854 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 13:03:25.770 +01:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 13:03:25.927 +01:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 13:03:25.959 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 13:03:25.966 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 13:03:26.051 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 13:03:26.108 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 13:03:26.974 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 13:03:27.154 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 13:03:27.159 +01:00 [INF] Hosting environment: Development
2025-04-15 13:03:27.162 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 13:03:28.434 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 13:03:29.383 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 13:03:29.383 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 13:03:29.386 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 976.1486ms
2025-04-15 13:03:29.449 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 72.3301ms
2025-04-15 13:03:29.689 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 305.6801ms
2025-04-15 13:03:29.852 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 13:03:30.042 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 190.0376ms
2025-04-15 13:03:44.249 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 13:03:44.438 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 13:03:44.662 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 13:03:46.015 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 13:03:46.194 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 13:03:46.258 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 1517.56ms
2025-04-15 13:03:46.266 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 13:03:46.287 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 2038.8127ms
2025-04-15 13:04:20.942 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 13:04:20.952 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 13:04:20.985 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 13:04:24.898 +01:00 [INF] Executed DbCommand (72ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 13:04:24.982 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 13:04:24.988 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 13:04:25.128 +01:00 [INF] Received HTTP response headers after 127.9864ms - 200
2025-04-15 13:04:25.140 +01:00 [INF] End processing HTTP request after 164.2654ms - 200
2025-04-15 13:04:28.856 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 13:04:28.870 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 13:04:28.959 +01:00 [INF] Received HTTP response headers after 84.0376ms - 200
2025-04-15 13:04:28.962 +01:00 [INF] End processing HTTP request after 106.0049ms - 200
2025-04-15 13:04:34.572 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-15 13:04:34.781 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-15 13:04:36.935 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-15 13:04:36.979 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 13:04:37.112 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 16118.1418ms
2025-04-15 13:04:37.124 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 13:04:37.144 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 16202.6264ms
2025-04-15 22:49:49.091 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 22:49:50.995 +01:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 22:49:51.112 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 22:49:51.122 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 22:49:51.127 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 22:49:51.197 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 22:49:51.247 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 22:49:52.498 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 22:49:52.694 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 22:49:52.698 +01:00 [INF] Hosting environment: Development
2025-04-15 22:49:52.706 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 22:49:55.590 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 22:49:57.512 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 22:49:57.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 22:49:57.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1969.0854ms
2025-04-15 22:49:57.837 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 318.7478ms
2025-04-15 22:49:58.145 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 616.1863ms
2025-04-15 22:49:58.403 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 22:49:58.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 312.2739ms
2025-04-15 22:50:48.372 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 22:50:48.510 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 22:50:48.608 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 22:50:50.062 +01:00 [INF] Executed DbCommand (120ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 22:50:50.328 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 22:50:50.336 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 22:50:55.252 +01:00 [INF] Received HTTP response headers after 4901.6049ms - 200
2025-04-15 22:50:55.264 +01:00 [INF] End processing HTTP request after 4940.1502ms - 200
2025-04-15 22:50:58.993 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 22:50:59.011 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 22:51:06.094 +01:00 [INF] Received HTTP response headers after 7079.923ms - 200
2025-04-15 22:51:06.106 +01:00 [INF] End processing HTTP request after 7113.0571ms - 200
2025-04-15 22:51:21.487 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-15 22:51:21.558 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-15 22:51:22.907 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-15 22:51:22.949 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 22:51:23.146 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 34516.4328ms
2025-04-15 22:51:23.188 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 22:51:23.211 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 34839.1247ms
2025-04-15 22:53:34.285 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 22:53:34.295 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:53:34.313 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 22:53:34.738 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 22:53:34.763 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 22:53:34.775 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 456.4981ms
2025-04-15 22:53:34.781 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:53:34.790 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 505.2765ms
2025-04-15 22:56:24.780 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 22:56:24.858 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 22:56:24.871 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 22:56:25.171 +01:00 [INF] Executed DbCommand (212ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 22:56:25.680 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 22:56:25.692 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 798.9851ms
2025-04-15 22:56:25.696 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 22:56:25.699 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 918.992ms
2025-04-15 22:56:25.875 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 22:56:25.977 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 101.2948ms
2025-04-15 22:56:27.443 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 22:56:27.505 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 22:56:27.549 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 106.1547ms
2025-04-15 22:56:27.565 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 66.1312ms
2025-04-15 22:56:28.053 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 22:56:28.100 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.6435ms
2025-04-15 22:56:39.375 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 22:56:39.381 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 22:56:39.393 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 22:56:43.925 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 22:56:43.935 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 22:56:43.938 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 22:56:44.136 +01:00 [INF] Received HTTP response headers after 195.6279ms - 200
2025-04-15 22:56:44.146 +01:00 [INF] End processing HTTP request after 211.2695ms - 200
2025-04-15 22:56:46.596 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 22:56:46.630 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 22:56:46.887 +01:00 [INF] Received HTTP response headers after 199.6289ms - 200
2025-04-15 22:56:46.938 +01:00 [INF] End processing HTTP request after 342.9113ms - 200
2025-04-15 22:57:30.367 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-15 22:57:30.383 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-15 22:57:32.192 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-15 22:57:32.220 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 22:57:32.234 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 52837.0399ms
2025-04-15 22:57:32.237 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 22:57:32.242 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 52867.9736ms
2025-04-15 22:57:43.441 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 22:57:43.448 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:57:43.457 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 22:57:43.483 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 22:57:43.491 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 22:57:43.494 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 30.6536ms
2025-04-15 22:57:43.497 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:57:43.499 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 58.7271ms
2025-04-15 22:58:35.943 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 22:58:35.999 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:58:36.006 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 22:58:36.090 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 22:58:36.107 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 22:58:36.112 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 87.3747ms
2025-04-15 22:58:36.135 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:58:36.143 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 200.1183ms
2025-04-15 22:59:57.573 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 22:59:57.585 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 22:59:57.589 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:00:00.936 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 23:00:00.944 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 23:00:00.947 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 3352.2036ms
2025-04-15 23:00:00.954 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 23:00:01.087 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 3513.31ms
2025-04-15 23:01:21.686 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 23:01:21.694 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 23:01:21.699 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:01:34.048 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 23:01:34.071 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 23:01:34.075 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 12370.897ms
2025-04-15 23:01:34.083 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 23:01:34.092 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 12406.1514ms
2025-04-15 23:01:52.361 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79/verify - null 0
2025-04-15 23:01:52.367 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 23:01:52.378 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:02:14.009 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:02:14.029 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:02:14.241 +01:00 [INF] Received HTTP response headers after 209.699ms - 200
2025-04-15 23:02:14.246 +01:00 [INF] End processing HTTP request after 236.5948ms - 200
2025-04-15 23:02:25.893 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 23:02:25.896 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 23:02:26.029 +01:00 [INF] Received HTTP response headers after 128.8269ms - 200
2025-04-15 23:02:26.031 +01:00 [INF] End processing HTTP request after 138.2842ms - 200
2025-04-15 23:02:26.133 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-15 23:02:26.142 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 33760.1072ms
2025-04-15 23:02:26.146 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 23:02:26.150 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79/verify - 200 null application/json; charset=utf-8 33788.6191ms
2025-04-15 23:03:50.921 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 23:03:50.971 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 49.8823ms
2025-04-15 23:03:51.074 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 23:03:51.078 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 23:03:51.122 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 47.7828ms
2025-04-15 23:03:51.159 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.4036ms
2025-04-15 23:03:51.803 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 23:03:51.833 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.7662ms
2025-04-15 23:04:38.475 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-15 23:04:41.061 +01:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 23:04:41.217 +01:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 23:04:41.332 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-15 23:04:41.355 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-15 23:04:41.426 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-15 23:04:41.500 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-15 23:04:42.696 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-15 23:04:43.002 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 23:04:43.131 +01:00 [INF] Hosting environment: Development
2025-04-15 23:04:43.133 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-15 23:04:43.954 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 23:04:44.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-15 23:04:44.605 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 23:04:44.936 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 23:04:45.588 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1219.2169ms
2025-04-15 23:04:45.616 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-15 23:04:45.617 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-15 23:04:45.841 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 223.6632ms
2025-04-15 23:04:46.167 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 549.5365ms
2025-04-15 23:04:46.499 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 23:04:46.601 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-15 23:04:46.735 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.4912ms
2025-04-15 23:04:46.925 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 23:04:47.003 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2032.97ms
2025-04-15 23:04:47.015 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 23:04:47.058 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 3123.6593ms
2025-04-15 23:05:01.076 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-15 23:05:01.097 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 23:05:01.101 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-15 23:05:01.612 +01:00 [INF] Executed DbCommand (215ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-15 23:05:01.897 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 23:05:01.902 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 795.5268ms
2025-04-15 23:05:01.906 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-15 23:05:01.911 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 835.325ms
2025-04-15 23:05:16.163 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-15 23:05:16.242 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 23:05:16.283 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:05:19.330 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-15 23:05:19.398 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:05:19.409 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:05:20.009 +01:00 [INF] Received HTTP response headers after 588.9573ms - 200
2025-04-15 23:05:20.016 +01:00 [INF] End processing HTTP request after 624.8278ms - 200
2025-04-15 23:05:21.899 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 23:05:21.909 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-15 23:05:22.124 +01:00 [INF] Received HTTP response headers after 200.9365ms - 200
2025-04-15 23:05:22.127 +01:00 [INF] End processing HTTP request after 227.65ms - 200
2025-04-15 23:05:24.478 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-04-15 23:05:24.587 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p5, @p6, @p7, @p8);
2025-04-15 23:05:26.094 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-15 23:05:26.123 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 23:05:26.225 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 9929.4131ms
2025-04-15 23:05:26.294 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-15 23:05:26.303 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 10139.8384ms
2025-04-15 23:05:44.109 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - null null
2025-04-15 23:05:44.117 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 23:05:44.128 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:05:50.903 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-15 23:05:50.934 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-15 23:05:50.938 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 6801.8054ms
2025-04-15 23:05:50.947 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-15 23:05:50.950 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79 - 200 null application/json; charset=utf-8 6841.1052ms
2025-04-15 23:05:57.174 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79/verify - null 0
2025-04-15 23:05:57.181 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 23:05:57.193 +01:00 [INF] Route matched with {action = "VerifyPayment", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Boolean]] VerifyPayment(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-15 23:05:58.742 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:05:58.745 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-15 23:05:59.593 +01:00 [INF] Received HTTP response headers after 845.0014ms - 200
2025-04-15 23:05:59.666 +01:00 [INF] End processing HTTP request after 924.8054ms - 200
2025-04-15 23:06:02.642 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 23:06:02.645 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/transactionQuery
2025-04-15 23:06:02.728 +01:00 [INF] Received HTTP response headers after 79.3988ms - 200
2025-04-15 23:06:02.732 +01:00 [INF] End processing HTTP request after 90.7308ms - 200
2025-04-15 23:06:02.846 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2025-04-15 23:06:02.857 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API) in 5656.7475ms
2025-04-15 23:06:02.862 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.VerifyPayment (MiniSupermarketSystem.API)'
2025-04-15 23:06:02.867 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders/f1ef624c-5040-41a7-9829-f4e658533a79/verify - 200 null application/json; charset=utf-8 5692.7223ms
2025-04-16 10:02:32.346 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 10:02:34.004 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:02:34.096 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:02:34.107 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:02:34.111 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:02:34.185 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 10:02:34.232 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 10:02:34.823 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 10:02:34.860 +01:00 [INF] Creating key {2224eda1-299a-4e48-9f88-69c323348d9e} with creation date 2025-04-16 09:02:34Z, activation date 2025-04-16 09:02:34Z, and expiration date 2025-07-15 09:02:34Z.
2025-04-16 10:02:34.905 +01:00 [INF] Writing data to file 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys\key-2224eda1-299a-4e48-9f88-69c323348d9e.xml'.
2025-04-16 10:02:35.491 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 10:02:35.763 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 10:02:36.425 +01:00 [INF] Hosting environment: Development
2025-04-16 10:02:36.467 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 10:02:37.791 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 10:02:38.492 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 10:02:38.493 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 10:02:38.519 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 749.0257ms
2025-04-16 10:02:38.575 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 82.3743ms
2025-04-16 10:02:38.708 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 216.6038ms
2025-04-16 10:02:38.939 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 10:02:39.135 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 198.6446ms
2025-04-16 10:07:18.025 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 10:07:19.748 +01:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:07:19.934 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:07:19.967 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:07:19.973 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:07:20.120 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 10:07:20.199 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 10:07:20.958 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 10:07:21.853 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 10:07:22.618 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 10:07:23.140 +01:00 [INF] Hosting environment: Development
2025-04-16 10:07:23.142 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 10:07:23.642 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 10:07:25.189 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1648.4223ms
2025-04-16 10:07:25.221 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 10:07:25.221 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 10:07:25.537 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 315.8324ms
2025-04-16 10:07:25.728 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 507.3863ms
2025-04-16 10:07:26.015 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 10:07:26.206 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.4125ms
2025-04-16 10:07:46.423 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/api/auth/login - application/json; charset=utf-8 null
2025-04-16 10:12:19.279 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 10:12:21.569 +01:00 [INF] Executed DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:12:21.893 +01:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:12:21.952 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:12:21.971 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:12:22.134 +01:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 10:12:22.217 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 10:12:23.488 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 10:12:24.592 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 10:12:25.746 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 10:12:26.270 +01:00 [INF] Hosting environment: Development
2025-04-16 10:12:26.293 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 10:12:26.764 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 10:12:28.372 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1630.1582ms
2025-04-16 10:12:29.005 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 10:12:29.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 10:12:29.027 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 20.4258ms
2025-04-16 10:12:29.147 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 139.7029ms
2025-04-16 10:12:29.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 10:12:29.658 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.2484ms
2025-04-16 10:14:10.071 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 10:16:01.600 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 10:16:03.610 +01:00 [INF] Executed DbCommand (127ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:16:04.302 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:16:04.359 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 10:16:04.427 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 10:16:04.529 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 10:16:04.601 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 10:16:05.795 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 10:16:07.664 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 10:16:08.390 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 10:16:08.567 +01:00 [INF] Hosting environment: Development
2025-04-16 10:16:08.682 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 10:16:10.355 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 10:16:12.638 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2271.1053ms
2025-04-16 10:16:14.608 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 10:16:14.637 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 28.6779ms
2025-04-16 10:16:14.683 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 10:16:14.902 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 220.6269ms
2025-04-16 10:16:16.968 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 10:16:17.087 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.0971ms
2025-04-16 10:17:49.406 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 11:09:22.776 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:09:27.763 +01:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:09:27.892 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:09:27.903 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:09:27.910 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:09:28.032 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 11:09:28.090 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 11:09:28.580 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 11:09:29.084 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 11:09:29.291 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 11:09:29.441 +01:00 [INF] Hosting environment: Development
2025-04-16 11:09:29.464 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 11:09:30.617 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 11:09:30.623 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 11:09:33.052 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:09:33.067 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:09:33.079 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 401 0 null 2483.9714ms
2025-04-16 11:09:33.389 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 11:09:33.390 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 11:09:33.400 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2778.4262ms
2025-04-16 11:09:33.499 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 109.8523ms
2025-04-16 11:09:33.672 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 281.5866ms
2025-04-16 11:09:33.911 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 11:09:34.029 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 118.1661ms
2025-04-16 11:11:22.113 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:11:24.217 +01:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:11:24.526 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:11:24.542 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:11:24.550 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:11:24.683 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 11:11:24.757 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 11:11:25.655 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 11:11:26.456 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 11:11:27.871 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 11:11:28.672 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 11:11:28.682 +01:00 [INF] Hosting environment: Development
2025-04-16 11:11:28.691 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 11:11:30.284 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1621.2702ms
2025-04-16 11:11:30.420 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 11:11:30.423 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 11:11:30.501 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 81.3213ms
2025-04-16 11:11:30.702 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 279.7041ms
2025-04-16 11:11:30.984 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 11:11:31.184 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 200.4637ms
2025-04-16 11:11:48.450 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 11:11:48.683 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:11:48.695 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:11:48.699 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 401 0 null 249.6244ms
2025-04-16 11:14:32.211 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 11:14:32.225 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:14:32.229 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:14:32.231 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 401 0 null 20.9232ms
2025-04-16 11:17:38.047 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:17:38.909 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:17:38.986 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:17:38.996 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:17:39.001 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:17:39.058 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 11:17:39.088 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 11:17:39.429 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 11:17:39.791 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 11:17:39.949 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 11:17:39.951 +01:00 [INF] Hosting environment: Development
2025-04-16 11:17:39.953 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 11:17:41.402 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 11:17:42.775 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 11:17:42.790 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1404.5506ms
2025-04-16 11:17:42.795 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 11:17:42.908 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 132.7587ms
2025-04-16 11:17:43.090 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 295.3839ms
2025-04-16 11:17:43.394 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 11:17:43.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.9322ms
2025-04-16 11:18:05.652 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 11:18:06.013 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:18:06.091 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 11:18:21.589 +01:00 [ERR] Failed executing DbCommand (122ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 11:18:21.689 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
2025-04-16 11:18:22.072 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 15961.466ms
2025-04-16 11:18:22.079 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:18:22.098 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.AuthService.Authenticate(String username, String password) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\AuthService.cs:line 31
   at MiniSupermarketSystem.API.Controllers.AuthController.Login(LoginRequest request) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\AuthController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
2025-04-16 11:18:22.582 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 500 null text/plain; charset=utf-8 16929.3853ms
2025-04-16 11:18:31.694 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 11:18:31.780 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:18:31.792 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 11:18:40.747 +01:00 [ERR] Failed executing DbCommand (107ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 11:18:40.772 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
2025-04-16 11:18:41.214 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 9417.831ms
2025-04-16 11:18:41.218 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:18:41.226 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Users'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.AuthService.Authenticate(String username, String password) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\AuthService.cs:line 31
   at MiniSupermarketSystem.API.Controllers.AuthController.Login(LoginRequest request) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\AuthController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:d897894b-90dd-4fce-9b25-bb6222490a44
Error Number:208,State:1,Class:16
2025-04-16 11:18:41.800 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 500 null text/plain; charset=utf-8 10106.3552ms
2025-04-16 11:18:58.641 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 11:18:58.679 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:18:58.685 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 11:33:34.207 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:33:35.553 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:35:38.166 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:35:39.204 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:35:39.281 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:35:39.290 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:35:39.292 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:35:39.358 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 11:35:39.407 +01:00 [INF] Applying migration '20250416103336_AuthMigration'.
2025-04-16 11:35:39.757 +01:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD [PaymentDate] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-04-16 11:35:39.778 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NULL,
    [PasswordHash] nvarchar(max) NULL,
    [TerminalId] nvarchar(max) NULL,
    [MerchantId] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-04-16 11:35:39.899 +01:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'MerchantId', N'PasswordHash', N'TerminalId', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [MerchantId], [PasswordHash], [TerminalId], [Username])
VALUES (1, N'Izu12', N'$2a$11$D2/vBXoGnbtfGtY.AGAehu1oRtcemMfffTHX.W2R1.yRVwpnGlXr2', N'Izu123', N'Izu'),
(2, N'MC12', N'$2a$11$Dxm/AlgN01d06geXd9vNXOk9CdI9wyKcxtnzx7lSGsKibTKMIG5iq', N'TM45', N'Chizoba');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'MerchantId', N'PasswordHash', N'TerminalId', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-04-16 11:35:39.905 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250416103336_AuthMigration', N'8.0.0');
2025-04-16 11:36:45.393 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 11:36:48.791 +01:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:36:49.139 +01:00 [INF] Executed DbCommand (245ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:36:49.408 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 11:36:49.418 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 11:36:49.508 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 11:36:49.581 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 11:36:50.302 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 11:36:51.270 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 11:36:52.385 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 11:36:53.487 +01:00 [INF] Hosting environment: Development
2025-04-16 11:36:53.501 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 11:36:53.734 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 11:36:55.218 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1507.1417ms
2025-04-16 11:36:55.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 11:36:55.372 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 11:36:55.477 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 108.1556ms
2025-04-16 11:36:55.719 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 347.6389ms
2025-04-16 11:36:55.982 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 11:36:56.140 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.2436ms
2025-04-16 11:37:17.503 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 11:37:17.846 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:37:17.936 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 11:37:31.774 +01:00 [INF] Executed DbCommand (204ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 11:38:22.291 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 11:38:22.747 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 64786.5949ms
2025-04-16 11:38:22.754 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:38:22.779 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 65276.6599ms
2025-04-16 11:38:42.366 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 11:38:42.378 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:38:42.382 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 11:38:44.884 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 11:38:49.436 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 11:38:49.453 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 7064.4453ms
2025-04-16 11:38:49.460 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 11:38:49.466 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 7100.3843ms
2025-04-16 11:39:17.394 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 11:39:17.460 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-16 11:39:17.495 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-16 11:39:17.511 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:39:17.525 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:39:17.527 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 133.1883ms
2025-04-16 11:39:33.674 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 11:39:33.682 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-16 11:39:33.704 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-16 11:39:33.714 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:39:33.720 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:39:33.723 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 49.4042ms
2025-04-16 11:39:47.817 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 11:39:47.859 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-16 11:39:47.897 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-16 11:39:47.918 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:39:47.935 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:39:47.943 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 401 0 null 126.8919ms
2025-04-16 11:47:54.686 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 11:47:54.691 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-16 11:47:54.708 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-16 11:47:54.710 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:47:54.712 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:47:54.718 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 31.8171ms
2025-04-16 11:49:53.875 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 11:49:53.892 +01:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-04-16 11:49:53.921 +01:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-04-16 11:49:53.926 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 11:49:53.928 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 11:49:53.930 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 54.5526ms
2025-04-16 12:09:38.617 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 12:09:39.710 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:09:39.782 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:09:39.791 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:09:39.795 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:09:39.853 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 12:09:39.920 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 12:09:40.335 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 12:09:40.845 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 12:11:10.106 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 12:11:12.015 +01:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:11:12.159 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:11:12.178 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:11:12.183 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:11:12.295 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 12:11:12.370 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 12:11:12.908 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 12:11:13.684 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 12:11:13.967 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 12:11:13.972 +01:00 [INF] Hosting environment: Development
2025-04-16 12:11:13.974 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 12:11:15.753 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 12:11:17.428 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1700.7809ms
2025-04-16 12:11:17.632 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 12:11:17.639 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 12:11:18.126 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 493.9395ms
2025-04-16 12:11:18.385 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 746.022ms
2025-04-16 12:11:19.684 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 12:11:19.790 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.7677ms
2025-04-16 12:11:30.542 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 12:11:30.904 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:11:30.994 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 12:11:36.774 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 12:12:00.650 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 12:12:00.961 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 29940.389ms
2025-04-16 12:12:01.158 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:12:01.188 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 30646.6413ms
2025-04-16 12:12:32.933 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 12:12:33.101 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:12:33.115 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 12:12:42.646 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 12:12:42.714 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 12:12:42.758 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 9630.9916ms
2025-04-16 12:12:42.801 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:12:42.806 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 9873.7135ms
2025-04-16 12:12:52.656 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 12:12:52.684 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:12:52.687 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 12:12:54.707 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 12:12:54.716 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 12:12:54.721 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2026.5556ms
2025-04-16 12:12:54.732 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:12:54.739 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 2083.4842ms
2025-04-16 12:13:16.520 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 12:13:16.528 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 12:13:16.540 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 12:13:20.312 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 12:13:20.376 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 12:13:20.383 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 12:13:25.509 +01:00 [INF] Received HTTP response headers after 5113.3204ms - 200
2025-04-16 12:13:25.514 +01:00 [INF] End processing HTTP request after 5141.7964ms - 200
2025-04-16 12:13:27.656 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 12:13:27.667 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 12:13:34.698 +01:00 [INF] Received HTTP response headers after 7028.0805ms - 200
2025-04-16 12:13:34.701 +01:00 [INF] End processing HTTP request after 7045.1798ms - 200
2025-04-16 12:13:38.076 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-16 12:13:38.356 +01:00 [INF] Executed DbCommand (152ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-04-16 12:13:39.834 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 12:13:39.857 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 12:13:39.950 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 23401.4198ms
2025-04-16 12:13:39.956 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 12:13:39.970 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 23448.3558ms
2025-04-16 12:14:02.612 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/ - null null
2025-04-16 12:14:02.620 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 12:14:02.623 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 12:14:02.626 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/ - 405 0 null 14.0937ms
2025-04-16 12:15:38.341 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 12:15:39.604 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:15:39.703 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:15:39.812 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:15:39.873 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:15:40.104 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 12:15:40.154 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 12:15:40.970 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 12:15:41.844 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 12:15:42.282 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 12:15:43.450 +01:00 [INF] Hosting environment: Development
2025-04-16 12:15:43.478 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 12:15:43.963 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 12:15:45.832 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1895.1108ms
2025-04-16 12:15:46.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 12:15:46.150 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 12:15:46.806 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 735.6846ms
2025-04-16 12:15:46.929 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 780.7013ms
2025-04-16 12:15:51.418 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 12:15:51.564 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 147.1061ms
2025-04-16 12:16:54.984 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 12:16:55.305 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:16:55.402 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 12:17:00.697 +01:00 [INF] Executed DbCommand (205ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 12:17:01.872 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 12:17:01.948 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 6523.0315ms
2025-04-16 12:17:01.962 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:17:01.990 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 401 null application/problem+json; charset=utf-8 7006.6686ms
2025-04-16 12:20:28.081 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 12:20:28.985 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:20:29.042 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:20:29.049 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:20:29.053 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:20:29.093 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 12:20:29.139 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 12:20:29.540 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 12:20:29.938 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 12:20:30.141 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 12:20:31.345 +01:00 [INF] Hosting environment: Development
2025-04-16 12:20:31.367 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 12:20:31.712 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 12:20:33.711 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2021.2749ms
2025-04-16 12:20:34.030 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 12:20:34.033 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 12:20:34.111 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 80.8688ms
2025-04-16 12:20:34.319 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 285.5965ms
2025-04-16 12:20:35.942 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 12:20:36.077 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.715ms
2025-04-16 12:23:42.926 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 12:23:45.902 +01:00 [INF] Executed DbCommand (158ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:23:46.121 +01:00 [INF] Executed DbCommand (129ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:23:46.152 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 12:23:46.164 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 12:23:46.273 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 12:23:46.406 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 12:23:47.770 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 12:23:48.962 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 12:23:49.935 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 12:23:51.640 +01:00 [INF] Hosting environment: Development
2025-04-16 12:23:51.642 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 12:23:53.728 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 12:23:55.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1871.1288ms
2025-04-16 12:23:55.821 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 12:23:55.922 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 97.2668ms
2025-04-16 12:23:56.276 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 12:23:56.564 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 288.9486ms
2025-04-16 12:23:57.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 12:23:57.522 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.6126ms
2025-04-16 12:42:24.716 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 12:42:25.186 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:42:25.290 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 12:42:33.889 +01:00 [INF] Executed DbCommand (134ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 12:42:41.189 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 12:42:41.223 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 15914.3474ms
2025-04-16 12:42:41.229 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 12:42:41.245 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 16529.9231ms
2025-04-16 12:45:40.122 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 12:45:40.248 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:45:40.260 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 12:45:42.427 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 12:45:42.498 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 12:45:42.547 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2278.3623ms
2025-04-16 12:45:42.551 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 12:45:42.557 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 2435.1474ms
2025-04-16 12:51:46.485 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 12:51:46.511 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 11:47:40 AM', Current time (UTC): '4/16/2025 11:51:46 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-16 12:51:46.571 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 11:47:40 AM', Current time (UTC): '4/16/2025 11:51:46 AM'.
2025-04-16 12:51:46.580 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 12:51:46.600 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 12:51:46.602 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 117.0488ms
2025-04-16 13:20:39.928 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 13:20:41.497 +01:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 13:20:41.586 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 13:20:41.611 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 13:20:41.616 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 13:20:41.718 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 13:20:41.772 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 13:20:42.316 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 13:20:43.009 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 13:20:43.353 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 13:20:44.139 +01:00 [INF] Hosting environment: Development
2025-04-16 13:20:44.150 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 13:20:48.600 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/favicon.ico - null null
2025-04-16 13:20:48.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/favicon.ico - 404 0 null 378.3783ms
2025-04-16 13:20:48.980 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7235/favicon.ico, Response status code: 404
2025-04-16 13:20:51.167 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger - null null
2025-04-16 13:20:51.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger - 301 0 null 657.6096ms
2025-04-16 13:20:52.058 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 13:20:52.361 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 302.9575ms
2025-04-16 13:20:53.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 13:20:53.025 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 17.776ms
2025-04-16 13:20:53.445 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui.css - null null
2025-04-16 13:20:53.600 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui-bundle.js - null null
2025-04-16 13:20:53.615 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui-standalone-preset.js - null null
2025-04-16 13:20:53.680 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-16 13:20:53.690 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui.css - 200 152034 text/css 245.3147ms
2025-04-16 13:20:54.057 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-16 13:20:54.063 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 448.0573ms
2025-04-16 13:20:54.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 13:20:55.044 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-16 13:20:55.046 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 1445.6846ms
2025-04-16 13:20:55.261 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 534.8113ms
2025-04-16 13:20:57.549 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/favicon-32x32.png - null null
2025-04-16 13:20:57.549 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 13:20:57.564 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-16 13:20:57.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/favicon-32x32.png - 200 628 image/png 35.2935ms
2025-04-16 13:20:57.727 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 177.7378ms
2025-04-16 13:21:12.600 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - null 0
2025-04-16 13:21:12.674 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 13:21:12.739 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 13:21:12.765 +01:00 [INF] Response from notification: 
2025-04-16 13:21:13.035 +01:00 [ERR] Invalid JSON payload
System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 31
2025-04-16 13:21:13.104 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-16 13:21:13.125 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 366.6928ms
2025-04-16 13:21:13.127 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 13:21:13.129 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 400 null text/plain; charset=utf-8 529.5494ms
2025-04-16 13:22:26.472 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 13:22:26.483 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 13:22:26.503 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 13:22:32.012 +01:00 [INF] Executed DbCommand (140ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 13:22:37.544 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 13:22:37.722 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 11216.2275ms
2025-04-16 13:22:37.727 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 13:22:37.747 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 11274.823ms
2025-04-16 13:23:18.183 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 13:23:18.353 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 13:23:18.367 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 13:23:22.598 +01:00 [INF] Executed DbCommand (397ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 13:23:22.689 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 13:23:23.153 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 4777.6904ms
2025-04-16 13:23:23.156 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 13:23:23.162 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 4978.4384ms
2025-04-16 13:23:45.713 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 13:23:45.729 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 13:23:45.755 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 13:23:49.469 +01:00 [INF] Executed DbCommand (303ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 13:23:50.584 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 13:23:51.147 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 13:23:53.927 +01:00 [INF] Received HTTP response headers after 2768.825ms - 200
2025-04-16 13:23:53.931 +01:00 [INF] End processing HTTP request after 3353.5893ms - 200
2025-04-16 13:23:56.352 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 13:23:56.433 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 13:24:01.258 +01:00 [INF] Received HTTP response headers after 4819.1051ms - 200
2025-04-16 13:24:01.293 +01:00 [INF] End processing HTTP request after 4941.0895ms - 200
2025-04-16 13:24:07.185 +01:00 [INF] Executed DbCommand (2,973ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-16 13:24:07.636 +01:00 [INF] Executed DbCommand (133ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-04-16 13:24:08.925 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 13:24:08.969 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 13:24:09.065 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 23306.7803ms
2025-04-16 13:24:09.071 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 13:24:09.080 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 23367.0494ms
2025-04-16 13:24:23.709 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 13:24:23.728 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 13:24:23.733 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 13:24:28.465 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 13:24:28.472 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 13:24:28.475 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 4737.3183ms
2025-04-16 13:24:28.479 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 13:24:28.482 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 4773.158ms
2025-04-16 13:25:46.267 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - null null
2025-04-16 13:25:46.282 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 13:25:46.286 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 13:25:46.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - 405 0 null 25.3233ms
2025-04-16 13:25:56.118 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - null null
2025-04-16 13:25:56.126 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 13:25:56.129 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 13:25:56.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - 405 0 null 13.0189ms
2025-04-16 13:26:23.586 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - null null
2025-04-16 13:26:23.627 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 13:26:23.634 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 13:26:23.637 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - 405 0 null 50.9006ms
2025-04-16 13:26:55.679 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/23333 - null null
2025-04-16 13:26:55.689 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 13:26:55.705 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 13:26:55.707 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/23333 - 401 0 null 28.5831ms
2025-04-16 13:27:16.134 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/23335 - null null
2025-04-16 13:27:16.143 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 13:27:16.146 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 13:27:16.148 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/23335 - 401 0 null 14.7318ms
2025-04-16 13:28:58.868 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 13:28:58.928 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 60.6ms
2025-04-16 13:28:59.808 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 13:28:59.818 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 9.7157ms
2025-04-16 13:29:00.261 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 13:29:00.441 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 180.4817ms
2025-04-16 13:29:01.938 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 13:29:01.959 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.6694ms
2025-04-16 13:29:21.429 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - null 0
2025-04-16 13:29:21.437 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 13:29:21.439 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 13:29:21.443 +01:00 [INF] Response from notification: 
2025-04-16 13:29:21.543 +01:00 [ERR] Invalid JSON payload
System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 31
2025-04-16 13:29:21.554 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-04-16 13:29:21.556 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 113.1279ms
2025-04-16 13:29:21.558 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 13:29:21.560 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 400 null text/plain; charset=utf-8 132.212ms
2025-04-16 13:31:48.979 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 13:31:48.988 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 9.4128ms
2025-04-16 13:31:51.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - null null
2025-04-16 13:31:51.570 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 13:31:51.571 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 13:31:51.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - 405 0 null 18.9283ms
2025-04-16 13:32:51.499 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/favicon.ico - null null
2025-04-16 13:32:51.508 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/favicon.ico - 404 0 null 9.2203ms
2025-04-16 13:32:51.517 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7235/favicon.ico, Response status code: 404
2025-04-16 13:32:54.380 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - null null
2025-04-16 13:32:54.406 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-04-16 13:32:54.410 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-04-16 13:32:54.412 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/webhooks/payment-notifications - 405 0 null 35.2189ms
2025-04-16 13:32:57.804 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 13:32:57.826 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 22.8045ms
2025-04-16 13:32:58.103 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 13:32:58.106 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui-standalone-preset.js - null null
2025-04-16 13:32:58.566 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 463.0116ms
2025-04-16 13:32:58.782 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-16 13:32:58.788 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 682.731ms
2025-04-16 13:32:59.155 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui.css - null null
2025-04-16 13:32:59.526 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-16 13:32:59.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui.css - 200 152034 text/css 380.1749ms
2025-04-16 13:32:59.981 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/swagger-ui-bundle.js - null null
2025-04-16 13:32:59.981 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 13:32:59.999 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 18.9685ms
2025-04-16 13:33:01.742 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-16 13:33:01.746 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 1765.1917ms
2025-04-16 13:33:02.766 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 13:33:02.781 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.5644ms
2025-04-16 13:33:02.793 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/favicon-32x32.png - null null
2025-04-16 13:33:02.797 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-16 13:33:02.800 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/favicon-32x32.png - 200 628 image/png 7.6818ms
2025-04-16 13:33:06.267 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 13:33:06.273 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 6.5634ms
2025-04-16 16:27:04.929 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 16:27:06.582 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:27:06.662 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:27:06.674 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:27:06.680 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:27:06.916 +01:00 [INF] Executed DbCommand (180ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 16:27:06.983 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 16:27:07.772 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 16:27:08.456 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 16:27:08.790 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 16:27:08.834 +01:00 [INF] Hosting environment: Development
2025-04-16 16:27:08.836 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 16:27:11.526 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 16:27:12.556 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 16:27:12.572 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 16:27:12.599 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1100.2845ms
2025-04-16 16:27:12.627 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 70.973ms
2025-04-16 16:27:12.934 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 361.5285ms
2025-04-16 16:27:13.186 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 16:27:13.414 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 227.9688ms
2025-04-16 16:27:31.598 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 16:27:31.983 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:27:32.068 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 16:27:41.348 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 16:27:42.970 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 16:27:43.027 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 56.7275ms
2025-04-16 16:27:43.605 +01:00 [INF] Executed DbCommand (324ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 16:27:44.668 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 16:27:44.696 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 16:27:44.706 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 9.5079ms
2025-04-16 16:27:44.767 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 98.8916ms
2025-04-16 16:27:48.741 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 16:27:49.975 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1234.2067ms
2025-04-16 16:27:50.343 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 16:27:50.542 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 16:27:50.606 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 18518.3844ms
2025-04-16 16:27:50.613 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:27:50.641 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 19043.4419ms
2025-04-16 16:27:57.466 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 16:27:57.662 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:27:57.673 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 16:28:00.957 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 16:28:01.049 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 16:28:01.097 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 3418.03ms
2025-04-16 16:28:01.104 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:28:01.108 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 3642.2698ms
2025-04-16 16:28:19.098 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 16:28:19.125 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:28:19.133 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 16:28:22.964 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 16:28:22.978 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 16:28:22.985 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 3837.8237ms
2025-04-16 16:28:22.993 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:28:22.997 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 3899.0023ms
2025-04-16 16:28:34.623 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 16:28:34.644 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 16:28:34.665 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 16:28:34.715 +01:00 [INF] Starting order processing. Transaction: e47303bc-e828-4e04-8071-0edbe2ff1475
2025-04-16 16:28:34.826 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 16:28:34.871 +01:00 [INF] Generating bank account for payment
2025-04-16 16:28:34.876 +01:00 [INF] Acquiring new auth token
2025-04-16 16:28:34.890 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 16:28:34.894 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 16:28:35.165 +01:00 [INF] Received HTTP response headers after 259.7412ms - 200
2025-04-16 16:28:35.171 +01:00 [INF] End processing HTTP request after 284.1782ms - 200
2025-04-16 16:28:35.198 +01:00 [ERR] Authentication rejected by bank: 01 - Invalid credentials
2025-04-16 16:28:35.376 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
2025-04-16 16:28:35.653 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
2025-04-16 16:28:35.861 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 16:28:36.115 +01:00 [ERR] Failed to generate payment account for amount 2000.00
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 16:28:36.145 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 16:28:36.147 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 16:28:39.086 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-16 16:28:39.197 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-04-16 16:28:40.225 +01:00 [INF] Order created successfully. Order ID: 18
2025-04-16 16:28:40.307 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 16:28:40.348 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 16:28:40.497 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 5825.5681ms
2025-04-16 16:28:40.521 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 16:28:40.526 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 5902.6446ms
2025-04-16 16:28:49.983 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 16:28:49.992 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:28:49.996 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 16:28:52.811 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 16:28:52.820 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 16:28:52.825 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 2823.5674ms
2025-04-16 16:28:52.830 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:28:52.835 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 2851.6946ms
2025-04-16 16:29:08.053 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 16:29:08.079 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 16:29:08.085 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 16:29:08.103 +01:00 [INF] Starting order processing. Transaction: 37d1f942-5a9d-4f53-b6d8-0602a34e5399
2025-04-16 16:29:08.129 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 16:29:08.142 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 16:29:08.151 +01:00 [INF] Generating bank account for payment
2025-04-16 16:29:08.154 +01:00 [INF] Acquiring new auth token
2025-04-16 16:29:08.157 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 16:29:08.160 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 16:29:08.239 +01:00 [INF] Received HTTP response headers after 74.8581ms - 200
2025-04-16 16:29:08.241 +01:00 [INF] End processing HTTP request after 84.4816ms - 200
2025-04-16 16:29:08.274 +01:00 [ERR] Authentication rejected by bank: 01 - Invalid credentials
2025-04-16 16:29:08.378 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
2025-04-16 16:29:08.548 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
2025-04-16 16:29:08.773 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 16:29:09.027 +01:00 [ERR] Failed to generate payment account for amount 1002.99
System.Exception: Authentication failed: Invalid credentials
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 146
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 102
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 16:29:09.038 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 16:29:09.040 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 16:29:11.443 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-16 16:29:11.535 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [OrderDetails] USING (
VALUES (@p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, 1)) AS i ([OrderId], [ProductId], [Quantity], [UnitPrice], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([OrderId], [ProductId], [Quantity], [UnitPrice])
VALUES (i.[OrderId], i.[ProductId], i.[Quantity], i.[UnitPrice])
OUTPUT INSERTED.[Id], i._Position;
2025-04-16 16:29:12.298 +01:00 [INF] Order created successfully. Order ID: 19
2025-04-16 16:29:12.594 +01:00 [INF] Executed DbCommand (86ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 16:29:13.116 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 16:29:13.135 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 16:29:13.141 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 5043.0322ms
2025-04-16 16:29:13.145 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 16:29:13.149 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 5095.7286ms
2025-04-16 16:29:55.392 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/37d1f942-5a9d-4f53-b6d8-0602a34e5399 - null null
2025-04-16 16:29:55.412 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 16:29:55.429 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 16:30:00.626 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 16:30:00.668 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 16:30:00.673 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 5236.4056ms
2025-04-16 16:30:00.680 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 16:30:00.688 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/37d1f942-5a9d-4f53-b6d8-0602a34e5399 - 200 null application/json; charset=utf-8 5295.6982ms
2025-04-16 16:30:47.835 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 16:30:49.208 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:30:49.303 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:30:49.315 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:30:49.322 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:30:49.392 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 16:30:49.444 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 16:30:49.924 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 16:30:50.465 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 16:30:50.659 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 16:30:50.663 +01:00 [INF] Hosting environment: Development
2025-04-16 16:30:50.665 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 16:30:52.412 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 16:30:53.511 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1105.2559ms
2025-04-16 16:30:53.594 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 16:30:53.594 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 16:30:53.642 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 47.9475ms
2025-04-16 16:30:53.812 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 219.2415ms
2025-04-16 16:30:54.052 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 16:30:54.179 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.9613ms
2025-04-16 16:33:09.735 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 16:33:10.068 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:33:10.125 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 16:33:11.945 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 16:33:13.466 +01:00 [INF] Executed DbCommand (245ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 16:33:16.933 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 16:33:16.951 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 16:33:16.987 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 6845.6731ms
2025-04-16 16:33:16.993 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:33:17.011 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 7276.364ms
2025-04-16 16:38:22.095 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 16:38:22.268 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:38:22.284 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 16:38:25.459 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 16:38:25.531 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 16:38:25.560 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 3269.3261ms
2025-04-16 16:38:25.565 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 16:38:25.570 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 3474.6551ms
2025-04-16 16:39:28.070 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 16:39:29.669 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:39:29.806 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:39:29.818 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 16:39:29.824 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 16:39:29.891 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 16:39:29.965 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 16:39:30.442 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 16:39:31.104 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 16:39:31.523 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 16:39:31.542 +01:00 [INF] Hosting environment: Development
2025-04-16 16:39:31.545 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 16:39:32.863 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 16:39:32.863 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 16:39:33.481 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:39:33.580 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 16:39:37.196 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 16:39:37.305 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 4452.6982ms
2025-04-16 16:39:37.592 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 16:39:37.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 26.6131ms
2025-04-16 16:39:37.642 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 16:39:37.784 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 141.5952ms
2025-04-16 16:39:38.505 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 16:39:38.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 420.8919ms
2025-04-16 16:39:39.276 +01:00 [INF] Executed DbCommand (223ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 16:39:44.869 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 16:39:44.893 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 16:39:44.925 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 11322.0495ms
2025-04-16 16:39:44.939 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 16:39:44.962 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 12133.9764ms
2025-04-16 16:48:55.965 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 16:48:56.090 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 3:44:43 PM', Current time (UTC): '4/16/2025 3:48:56 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-16 16:48:56.120 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 3:44:43 PM', Current time (UTC): '4/16/2025 3:48:56 PM'.
2025-04-16 16:48:56.139 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 16:48:56.161 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 16:48:56.165 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 199.7788ms
2025-04-16 19:14:41.362 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 19:14:43.836 +01:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:14:44.065 +01:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:14:44.077 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:14:44.085 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:14:44.213 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 19:14:44.350 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 19:14:45.326 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 19:14:46.181 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 19:14:46.575 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 19:14:47.101 +01:00 [INF] Hosting environment: Development
2025-04-16 19:14:47.151 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 19:14:49.554 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 19:14:50.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 19:14:50.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 19:14:50.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1066.7068ms
2025-04-16 19:14:50.794 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 210.6213ms
2025-04-16 19:14:51.074 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 489.8421ms
2025-04-16 19:14:51.306 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 19:14:51.548 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 241.6474ms
2025-04-16 19:15:22.256 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 19:15:22.706 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 19:15:22.769 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 19:15:22.861 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 19:15:23.910 +01:00 [INF] Executed DbCommand (131ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 19:15:24.676 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 19:15:24.697 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 19:15:24.731 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1944.8649ms
2025-04-16 19:15:24.741 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 19:15:24.772 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2516.2515ms
2025-04-16 19:15:28.271 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 19:15:28.424 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 19:15:28.441 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 19:15:28.619 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 19:15:28.678 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 19:15:28.701 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 250.6161ms
2025-04-16 19:15:28.705 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 19:15:28.709 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 437.8175ms
2025-04-16 19:15:46.111 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 19:15:46.125 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 19:15:46.129 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 19:15:46.148 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 19:15:46.155 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 19:15:46.160 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 23.5214ms
2025-04-16 19:15:46.165 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 19:15:46.169 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 58.6994ms
2025-04-16 19:15:53.179 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 19:15:53.189 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 19:15:53.202 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 19:15:53.242 +01:00 [INF] Starting order processing. Transaction: c9e6e65c-53c1-468f-95bf-41aca3caae93
2025-04-16 19:15:53.346 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 19:15:53.369 +01:00 [INF] Generating bank account for payment
2025-04-16 19:15:53.374 +01:00 [INF] Acquiring new auth token
2025-04-16 19:15:53.388 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 19:15:53.394 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 19:15:56.159 +01:00 [INF] Received HTTP response headers after 2746.7702ms - 200
2025-04-16 19:15:56.169 +01:00 [INF] End processing HTTP request after 2783.8191ms - 200
2025-04-16 19:15:56.223 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 19:15:56.416 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 19:15:56.645 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 19:15:56.842 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 19:15:57.072 +01:00 [ERR] Failed to generate payment account for amount 1000.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 19:15:57.105 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 19:15:57.107 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 19:15:57.572 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-04-16 19:15:57.659 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p6, @p7, @p8, @p9);
2025-04-16 19:15:57.702 +01:00 [INF] Order created successfully. Order ID: 20
2025-04-16 19:15:57.722 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 19:15:57.742 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 19:15:57.806 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 4597.6916ms
2025-04-16 19:15:57.810 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 19:15:57.815 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 4635.7524ms
2025-04-16 19:16:12.085 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/6 - null null
2025-04-16 19:16:12.093 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 19:16:12.106 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 19:16:12.346 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 19:16:12.357 +01:00 [WRN] Order not found for reference: 6
2025-04-16 19:16:12.362 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 19:16:12.394 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 281.3016ms
2025-04-16 19:16:12.398 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 19:16:12.402 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/6 - 404 null application/problem+json; charset=utf-8 316.3398ms
2025-04-16 19:43:04.282 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 19:43:05.813 +01:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:43:05.923 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:43:05.932 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:43:05.937 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:43:05.990 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 19:43:06.036 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 19:43:06.506 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 19:43:07.081 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 19:43:07.318 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 19:43:07.324 +01:00 [INF] Hosting environment: Development
2025-04-16 19:43:07.327 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 19:43:13.388 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 19:43:14.027 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 654.6386ms
2025-04-16 19:43:14.399 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 19:43:14.454 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 55.0899ms
2025-04-16 19:43:15.393 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 19:43:16.211 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 817.7296ms
2025-04-16 19:43:18.415 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 19:43:18.518 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.4723ms
2025-04-16 19:46:20.544 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 19:46:20.867 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 19:46:20.931 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 19:47:00.736 +01:00 [INF] Response from notification: {"ProcessorTransactionId":"11604251946099539911877099904","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416184609102403755381","TransactionId":"20250416074617952248","SessionId":"100067250416184609102403755381","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 19:47:50.170 +01:00 [WRN] The given key was not present in the dictionary.
2025-04-16 19:47:50.219 +01:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-04-16 19:47:50.240 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 89292.0659ms
2025-04-16 19:47:50.244 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 19:47:50.248 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 404 null text/plain; charset=utf-8 89704.6531ms
2025-04-16 19:57:48.693 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 19:57:49.879 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:57:49.959 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:57:49.972 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 19:57:49.979 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 19:57:50.027 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 19:57:50.069 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 19:57:51.140 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 19:57:51.545 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 19:57:51.938 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 19:57:52.725 +01:00 [INF] Hosting environment: Development
2025-04-16 19:57:52.763 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 19:57:55.109 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 19:57:55.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 653.3525ms
2025-04-16 19:57:56.988 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 19:57:56.989 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 19:57:57.047 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 63.5962ms
2025-04-16 19:57:57.470 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 481.1238ms
2025-04-16 19:58:00.386 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 19:58:00.437 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.7876ms
2025-04-16 19:59:17.835 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 19:59:18.115 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 19:59:18.175 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 19:59:25.298 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604251959161099917191026159","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416185916939959433062","TransactionId":"20250416075916299559","SessionId":"100067250416185916939959433062","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 19:59:42.822 +01:00 [INF] Processing successful payment for reference: 100067250416185916939959433062
2025-04-16 19:59:53.612 +01:00 [INF] Executed DbCommand (152ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 19:59:56.938 +01:00 [WRN] Order not found for reference: 100067250416185916939959433062
2025-04-16 19:59:58.407 +01:00 [ERR] Unexpected error processing payment notification
System.Collections.Generic.KeyNotFoundException: Order with reference 100067250416185916939959433062 not found
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 28
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 51
2025-04-16 19:59:58.511 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 19:59:58.553 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 40358.843ms
2025-04-16 19:59:58.563 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 19:59:58.579 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 40745.0419ms
2025-04-16 20:00:00.979 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:00:00.999 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:00:01.003 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:00:06.920 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604251959161099917191026159","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416185916939959433062","TransactionId":"20250416075916299559","SessionId":"100067250416185916939959433062","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:00:06.933 +01:00 [INF] Processing successful payment for reference: 100067250416185916939959433062
2025-04-16 20:00:14.630 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:00:15.739 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:00:15.743 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:00:25.493 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604251946099539911877099904","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416184609102403755381","TransactionId":"20250416074617952248","SessionId":"100067250416184609102403755381","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:00:25.509 +01:00 [INF] Processing successful payment for reference: 100067250416184609102403755381
2025-04-16 20:00:40.844 +01:00 [INF] Executed DbCommand (88ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:00:40.905 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:12:28.429 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:12:29.622 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:12:30.058 +01:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:12:30.069 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:12:30.074 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:12:30.159 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:12:30.262 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:12:31.231 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 20:12:31.725 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 20:12:32.568 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:12:32.571 +01:00 [INF] Hosting environment: Development
2025-04-16 20:12:32.574 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 20:12:37.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 20:12:38.125 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 613.1629ms
2025-04-16 20:12:39.554 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:12:39.582 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 27.8439ms
2025-04-16 20:12:39.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 20:12:40.273 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 644.3509ms
2025-04-16 20:12:44.513 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 20:12:44.606 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.7453ms
2025-04-16 20:14:16.564 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:14:16.832 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:14:16.870 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:14:26.012 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252014145749911692738766","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416191414068997086103","TransactionId":"20250416081414681742","SessionId":"100067250416191414068997086103","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:14:26.020 +01:00 [INF] Processing successful payment for reference: 100067250416191414068997086103
2025-04-16 20:14:34.268 +01:00 [INF] Executed DbCommand (137ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:14:34.303 +01:00 [WRN] Order not found for reference: 100067250416191414068997086103
2025-04-16 20:14:34.529 +01:00 [ERR] Unexpected error processing payment notification
System.Collections.Generic.KeyNotFoundException: Order with reference 100067250416191414068997086103 not found
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 28
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 51
2025-04-16 20:14:34.566 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:14:34.592 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 17693.6235ms
2025-04-16 20:14:34.598 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:14:34.610 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 18048.0997ms
2025-04-16 20:15:00.563 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:15:00.631 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:15:00.640 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:15:09.615 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252014145749911692738766","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416191414068997086103","TransactionId":"20250416081414681742","SessionId":"100067250416191414068997086103","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:15:09.722 +01:00 [INF] Processing successful payment for reference: 100067250416191414068997086103
2025-04-16 20:17:21.411 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:17:22.482 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:17:22.560 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:17:22.570 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:17:22.577 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:17:22.635 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:17:22.687 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:17:23.067 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 20:17:23.582 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 20:17:23.800 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:17:23.803 +01:00 [INF] Hosting environment: Development
2025-04-16 20:17:23.806 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 20:17:28.073 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 20:17:28.633 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 575.6333ms
2025-04-16 20:17:32.386 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 20:17:32.386 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:17:32.444 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 58.6171ms
2025-04-16 20:17:32.964 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 579.7125ms
2025-04-16 20:17:39.638 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 20:17:39.737 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 99.0886ms
2025-04-16 20:18:22.345 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 20:18:22.617 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:18:22.667 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:18:29.824 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252018217539918512238691","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":500.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416191821508129002064","TransactionId":"20250416081821817711","SessionId":"100067250416191821508129002064","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:18:29.832 +01:00 [INF] Processing successful payment for reference: 9919859659
2025-04-16 20:18:39.865 +01:00 [INF] Executed DbCommand (143ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:18:50.977 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [BankAccountNumber] = @p0, [OrderDate] = @p1, [PaymentDate] = @p2, [PaymentStatus] = @p3, [TotalAmount] = @p4, [TransactionReference] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-04-16 20:18:53.970 +01:00 [INF] Updated payment status for 9919859659 to completed
2025-04-16 20:18:53.999 +01:00 [INF] Successfully processed payment notification for 9919859659
2025-04-16 20:18:54.019 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:18:54.057 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 31370.5132ms
2025-04-16 20:18:54.066 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:18:54.088 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 200 null application/json; charset=utf-8 31745.0362ms
2025-04-16 20:19:24.890 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 20:19:24.901 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:19:24.933 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 20:19:25.014 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 20:19:25.201 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 20:19:25.802 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 20:19:25.806 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:19:25.819 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 880.5013ms
2025-04-16 20:19:25.822 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:19:25.827 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 937.179ms
2025-04-16 20:19:55.205 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - null null
2025-04-16 20:19:55.356 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:19:55.369 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 20:19:55.425 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:19:55.447 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 20:19:55.480 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 105.0608ms
2025-04-16 20:19:55.484 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:19:55.488 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - 200 null application/json; charset=utf-8 282.2442ms
2025-04-16 20:20:03.004 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:20:03.005 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 659
2025-04-16 20:20:03.020 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:20:03.033 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:20:03.041 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:20:03.049 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 20:20:06.483 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252014145749911692738766","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416191414068997086103","TransactionId":"20250416081414681742","SessionId":"100067250416191414068997086103","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:20:07.988 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252014145749911692738766","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":1000.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919859659","TraceId":"100067250416191414068997086103","TransactionId":"20250416081414681742","SessionId":"100067250416191414068997086103","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 20:20:08.003 +01:00 [INF] Processing successful payment for reference: 9919859659
2025-04-16 20:20:08.010 +01:00 [INF] Processing successful payment for reference: 9919859659
2025-04-16 20:20:11.083 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:20:15.465 +01:00 [INF] Executed DbCommand (1,946ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [BankAccountNumber] = @p0, [OrderDate] = @p1, [PaymentDate] = @p2, [PaymentStatus] = @p3, [TotalAmount] = @p4, [TransactionReference] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-04-16 20:20:15.484 +01:00 [INF] Updated payment status for 9919859659 to completed
2025-04-16 20:20:15.487 +01:00 [INF] Successfully processed payment notification for 9919859659
2025-04-16 20:20:15.495 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:20:15.507 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 12440.752ms
2025-04-16 20:20:15.511 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:20:15.513 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:20:16.557 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 200 null application/json; charset=utf-8 13551.4887ms
2025-04-16 20:20:16.565 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [BankAccountNumber] = @p0, [OrderDate] = @p1, [PaymentDate] = @p2, [PaymentStatus] = @p3, [TotalAmount] = @p4, [TransactionReference] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-04-16 20:20:16.588 +01:00 [INF] Updated payment status for 9919859659 to completed
2025-04-16 20:20:16.591 +01:00 [INF] Successfully processed payment notification for 9919859659
2025-04-16 20:20:16.593 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:20:16.598 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 10088.7427ms
2025-04-16 20:20:16.602 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 20:20:16.606 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 200 null application/json; charset=utf-8 13605.7637ms
2025-04-16 20:41:26.412 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:41:28.316 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:41:28.450 +01:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:41:28.460 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:41:28.466 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:41:28.563 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:41:28.630 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:41:29.188 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 20:41:29.800 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 20:41:30.049 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:41:30.704 +01:00 [INF] Hosting environment: Development
2025-04-16 20:41:30.716 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 20:45:07.445 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:45:08.837 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:45:50.082 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:45:51.050 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:45:51.137 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:45:51.145 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:45:51.147 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:45:51.206 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:45:51.253 +01:00 [INF] Applying migration '20250416194510_AmountPaidMigration'.
2025-04-16 20:45:51.463 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD [AmountPaid] nvarchar(max) NULL;
2025-04-16 20:45:51.494 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$DNB7IxrrOEsRPfrsiNgxoueXtS7PTLR9bel4u8spJYoqL8uFlI4eu'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2025-04-16 20:45:51.497 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$djsWt5rllUizGnrBDSioluP6YPJPW5PKYBqC08/CKFUs7hwdSfI/m'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2025-04-16 20:45:51.501 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250416194510_AmountPaidMigration', N'8.0.0');
2025-04-16 20:46:24.035 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:46:25.270 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:46:25.383 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:46:25.394 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:46:25.401 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:46:25.461 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:46:25.519 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:46:26.108 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 20:46:26.667 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 20:46:27.152 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:46:27.162 +01:00 [INF] Hosting environment: Development
2025-04-16 20:46:27.164 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 20:46:33.340 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 20:46:33.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 558.0109ms
2025-04-16 20:46:37.336 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:46:37.361 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 25.3587ms
2025-04-16 20:46:37.803 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 20:46:38.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 770.4081ms
2025-04-16 20:46:49.713 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 20:46:49.814 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.7266ms
2025-04-16 20:47:34.889 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 20:47:35.178 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:47:35.240 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 20:47:35.324 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 20:47:36.320 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 20:47:37.105 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 20:47:37.124 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:47:37.158 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1901.9866ms
2025-04-16 20:47:37.164 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:47:37.181 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2291.5819ms
2025-04-16 20:48:10.742 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - null null
2025-04-16 20:48:11.185 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:48:11.205 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 20:48:11.220 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-16 20:48:11.275 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 63.4472ms
2025-04-16 20:48:11.327 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:48:11.332 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - 400 null application/problem+json; charset=utf-8 590.3382ms
2025-04-16 20:50:00.280 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - null null
2025-04-16 20:50:00.312 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:50:00.316 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 20:50:00.324 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-16 20:50:00.327 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 5.4574ms
2025-04-16 20:50:00.331 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:50:00.334 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - 400 null application/problem+json; charset=utf-8 54.777ms
2025-04-16 20:51:44.558 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - null null
2025-04-16 20:51:44.569 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:51:44.572 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 20:51:44.580 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-16 20:51:44.585 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 6.0209ms
2025-04-16 20:51:44.589 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:51:44.593 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - 400 null application/problem+json; charset=utf-8 34.667ms
2025-04-16 20:53:37.695 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 20:53:38.923 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:53:39.009 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:53:39.020 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 20:53:39.027 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 20:53:39.103 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 20:53:39.144 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 20:53:39.627 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 20:53:40.131 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 20:53:40.535 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 20:53:40.594 +01:00 [INF] Hosting environment: Development
2025-04-16 20:53:40.604 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 20:53:45.992 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 20:53:46.938 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 977.3879ms
2025-04-16 20:53:50.082 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 20:53:50.541 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 459.2018ms
2025-04-16 20:53:50.743 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:53:50.782 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 39.2836ms
2025-04-16 20:54:13.416 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 20:54:13.469 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.2792ms
2025-04-16 20:55:24.387 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 20:55:24.436 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 49.5328ms
2025-04-16 20:55:26.550 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 20:55:26.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 10.5282ms
2025-04-16 20:55:27.694 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 20:55:28.816 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1121.4158ms
2025-04-16 20:55:34.947 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 20:55:34.980 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.7772ms
2025-04-16 20:55:57.462 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 20:55:57.741 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 20:55:57.752 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 20:55:57.756 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 401 0 null 293.4227ms
2025-04-16 20:56:46.002 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 20:56:46.043 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:56:46.155 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 20:56:46.250 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 20:56:47.458 +01:00 [INF] Executed DbCommand (112ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 20:56:48.454 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 20:56:48.477 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 20:56:48.517 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 2336.1124ms
2025-04-16 20:56:48.523 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 20:56:48.538 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2536.0403ms
2025-04-16 20:57:17.133 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 20:57:17.317 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:57:17.335 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 20:57:23.864 +01:00 [INF] Executed DbCommand (74ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 20:57:49.807 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 20:57:49.859 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 32519.1385ms
2025-04-16 20:57:49.865 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 20:57:49.870 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 200 null application/json; charset=utf-8 32737.115ms
2025-04-16 21:00:11.274 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:00:11.392 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 118.0127ms
2025-04-16 21:00:14.189 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:00:14.496 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:00:14.512 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 16.8425ms
2025-04-16 21:00:14.963 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 774.2205ms
2025-04-16 21:00:19.614 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:00:19.648 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.7637ms
2025-04-16 21:00:46.356 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 21:00:46.363 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:00:46.379 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:00:46.395 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:00:46.460 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:00:47.072 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:00:47.077 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:00:47.084 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 696.3452ms
2025-04-16 21:00:47.090 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:00:47.097 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 743.9527ms
2025-04-16 21:02:31.331 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:7235/api/Products/1 - application/json 109
2025-04-16 21:02:31.345 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.UpdateProduct (MiniSupermarketSystem.API)'
2025-04-16 21:02:31.356 +01:00 [INF] Route matched with {action = "UpdateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]] UpdateProduct(Int32, MiniSupermarketSystem.Application.Products.Command.UpdateProductCommand) on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:02:31.405 +01:00 [INF] Attempting to update product with ID 1
2025-04-16 21:02:31.461 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:02:31.675 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:02:31.708 +01:00 [INF] Successfully updated product 1
2025-04-16 21:02:31.714 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Product.Dtos.ProductDto'.
2025-04-16 21:02:31.724 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.UpdateProduct (MiniSupermarketSystem.API) in 360.6588ms
2025-04-16 21:02:31.729 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.UpdateProduct (MiniSupermarketSystem.API)'
2025-04-16 21:02:31.736 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:7235/api/Products/1 - 200 null application/json; charset=utf-8 405.0389ms
2025-04-16 21:03:19.025 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:03:19.035 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:03:19.046 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:03:22.692 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:03:22.716 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:03:22.997 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 3943.6907ms
2025-04-16 21:03:23.003 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:03:23.011 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at MiniSupermarketSystem.Application.Order.Dtos.OrderDto.get_PaymentDate()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:03:23.091 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 500 null text/plain; charset=utf-8 4065.566ms
2025-04-16 21:04:04.286 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:04:04.298 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:04:04.301 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:04:30.547 +01:00 [INF] Executed DbCommand (119ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:05:01.956 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:05:04.650 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 60341.5184ms
2025-04-16 21:05:04.655 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:05:04.661 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at MiniSupermarketSystem.Application.Order.Dtos.OrderDto.get_PaymentDate()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:05:04.706 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 500 null text/plain; charset=utf-8 60420.868ms
2025-04-16 21:05:25.625 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 21:05:25.654 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:05:25.658 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:05:25.668 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:05:25.691 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:05:26.133 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:05:26.136 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:05:26.141 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 478.1907ms
2025-04-16 21:05:26.145 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:05:26.148 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 522.7052ms
2025-04-16 21:06:50.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:06:50.557 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:06:50.564 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:07:03.638 +01:00 [INF] Executed DbCommand (140ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:07:04.492 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:07:04.512 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 13931.7395ms
2025-04-16 21:07:04.575 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:07:04.610 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at MiniSupermarketSystem.Application.Order.Dtos.OrderDto.get_PaymentDate()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:07:04.674 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 500 null text/plain; charset=utf-8 14138.3608ms
2025-04-16 21:07:35.036 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:07:35.067 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 30.9605ms
2025-04-16 21:07:35.661 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:07:37.029 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1367.4688ms
2025-04-16 21:07:38.724 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:07:38.744 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 19.9137ms
2025-04-16 21:07:41.696 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:07:41.738 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.0702ms
2025-04-16 21:08:11.480 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 21:08:11.503 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:08:11.529 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:08:11.553 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:08:11.601 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:08:12.122 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:08:12.126 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:08:12.132 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 590.1119ms
2025-04-16 21:08:12.138 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:08:12.142 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 663.7584ms
2025-04-16 21:08:48.356 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:08:48.380 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:08:48.404 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:08:55.511 +01:00 [INF] Executed DbCommand (92ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:09:40.325 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:09:40.342 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 51928.9654ms
2025-04-16 21:09:40.347 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:09:40.353 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Attempted to invoke a deleted method implementation. This can happen when a method is deleted or its name or signature is changed while the application is running.
   at MiniSupermarketSystem.Application.Order.Dtos.OrderDto.get_PaymentDate()
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:09:40.400 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 500 null text/plain; charset=utf-8 52045.0568ms
2025-04-16 21:13:09.265 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:13:10.503 +01:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:13:10.574 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:13:10.587 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:13:10.596 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:13:10.658 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:13:10.705 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:13:11.094 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:13:11.505 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:13:11.687 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:13:11.690 +01:00 [INF] Hosting environment: Development
2025-04-16 21:13:11.692 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:13:16.521 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:13:17.208 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 702.7563ms
2025-04-16 21:13:20.981 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:13:22.083 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:13:22.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 48.9183ms
2025-04-16 21:13:22.396 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1415.6674ms
2025-04-16 21:13:25.556 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:13:25.640 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.4446ms
2025-04-16 21:13:49.526 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 21:13:49.816 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:13:49.865 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:13:49.937 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:13:51.214 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:13:52.023 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:13:52.069 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:13:52.108 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 2226.9431ms
2025-04-16 21:13:52.114 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:13:52.131 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2604.8768ms
2025-04-16 21:14:39.539 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:14:39.773 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:14:39.787 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:14:44.987 +01:00 [INF] Executed DbCommand (54ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:14:56.769 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:14:56.805 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 17011.2023ms
2025-04-16 21:14:56.811 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:14:56.815 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 200 null application/json; charset=utf-8 17276.3414ms
2025-04-16 21:15:42.363 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:15:43.814 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:15:43.901 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:15:43.915 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:15:43.922 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:15:43.971 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:15:44.015 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:15:44.392 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:15:44.815 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:15:44.997 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:15:45.119 +01:00 [INF] Hosting environment: Development
2025-04-16 21:15:45.120 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:15:47.859 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:15:48.416 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 569.3134ms
2025-04-16 21:15:50.362 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:15:50.994 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 631.7861ms
2025-04-16 21:15:51.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:15:51.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 32.3765ms
2025-04-16 21:16:12.743 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:16:12.825 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 81.6783ms
2025-04-16 21:16:50.308 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/auth/login - application/json 51
2025-04-16 21:16:50.552 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:16:50.615 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:16:50.695 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:16:51.623 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:16:52.377 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:16:52.400 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:16:52.433 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1798.7352ms
2025-04-16 21:16:52.439 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:16:52.470 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2162.0899ms
2025-04-16 21:17:48.376 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - null null
2025-04-16 21:17:48.554 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:17:48.569 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:17:53.667 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:18:11.292 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:18:11.326 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 22752.5493ms
2025-04-16 21:18:11.330 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:18:11.334 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/api/Orders/9919859659 - 200 null application/json; charset=utf-8 22959.1279ms
2025-04-16 21:18:44.001 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 21:18:44.015 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:18:44.019 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:18:44.034 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:18:44.054 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:18:44.523 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:18:44.525 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:18:44.535 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 511.3527ms
2025-04-16 21:18:44.539 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:18:44.542 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 541.9374ms
2025-04-16 21:19:01.725 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - null null
2025-04-16 21:19:01.742 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:19:01.746 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:19:04.738 +01:00 [INF] Executed DbCommand (57ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 21:19:05.731 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:19:05.740 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 3985.598ms
2025-04-16 21:19:05.745 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 21:19:05.749 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919859659 - 200 null application/json; charset=utf-8 4024.5099ms
2025-04-16 21:19:27.716 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:19:27.726 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:19:27.738 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:19:27.770 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:19:27.782 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:19:27.792 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 48.4321ms
2025-04-16 21:19:27.798 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:19:27.801 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 84.4578ms
2025-04-16 21:19:48.878 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:19:48.910 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:19:48.923 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:19:48.961 +01:00 [INF] Starting order processing. Transaction: 8da94bb3-a9be-4608-96c4-b91bc15683f5
2025-04-16 21:19:49.001 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:19:49.024 +01:00 [INF] Generating bank account for payment
2025-04-16 21:19:49.030 +01:00 [INF] Acquiring new auth token
2025-04-16 21:19:49.044 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:19:49.050 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:19:54.148 +01:00 [INF] Received HTTP response headers after 5088.0342ms - 200
2025-04-16 21:19:54.153 +01:00 [INF] End processing HTTP request after 5113.0666ms - 200
2025-04-16 21:19:54.170 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:19:54.302 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:19:54.548 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:19:54.776 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:19:55.017 +01:00 [ERR] Failed to generate payment account for amount 2000.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:19:55.043 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:19:55.045 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:19:55.502 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:19:55.561 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:19:55.604 +01:00 [INF] Order created successfully. Order ID: 21
2025-04-16 21:19:55.629 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:19:55.651 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:19:55.717 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 6788.3081ms
2025-04-16 21:19:55.721 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:19:55.728 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:19:55.764 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 6885.9901ms
2025-04-16 21:22:17.493 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:22:18.775 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:22:18.847 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:22:18.857 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:22:18.863 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:22:18.937 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:22:18.978 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:22:19.342 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:22:19.755 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:22:19.998 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:22:20.201 +01:00 [INF] Hosting environment: Development
2025-04-16 21:22:20.518 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:22:22.299 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:22:22.888 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 598.3028ms
2025-04-16 21:22:24.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:22:25.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 771.5342ms
2025-04-16 21:22:26.733 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:22:26.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 18.1015ms
2025-04-16 21:22:33.309 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 21:22:33.620 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:22:33.694 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:22:33.787 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:22:34.776 +01:00 [INF] Executed DbCommand (98ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:22:35.463 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:22:35.481 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:22:35.514 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1803.086ms
2025-04-16 21:22:35.522 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:22:35.546 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2237.8827ms
2025-04-16 21:22:36.389 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:22:36.459 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.8435ms
2025-04-16 21:22:39.159 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:22:39.299 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:22:39.311 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:22:39.494 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:22:39.544 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:22:39.573 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 254.9469ms
2025-04-16 21:22:39.579 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:22:39.583 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 424.4282ms
2025-04-16 21:23:01.842 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:23:01.858 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:23:01.874 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:23:04.114 +01:00 [INF] Starting order processing. Transaction: 8f055d0a-87ca-458e-8ba7-bf96be077b26
2025-04-16 21:23:04.458 +01:00 [INF] Executed DbCommand (138ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:23:05.352 +01:00 [INF] Generating bank account for payment
2025-04-16 21:23:05.384 +01:00 [INF] Acquiring new auth token
2025-04-16 21:23:05.409 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:23:05.422 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:23:07.295 +01:00 [INF] Received HTTP response headers after 1863.6152ms - 200
2025-04-16 21:23:07.300 +01:00 [INF] End processing HTTP request after 1898.4395ms - 200
2025-04-16 21:23:07.322 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:23:07.476 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:23:07.667 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:23:07.880 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:23:08.147 +01:00 [ERR] Failed to generate payment account for amount 1000.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:23:08.159 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:23:08.162 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:23:08.793 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:23:08.877 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:23:08.925 +01:00 [INF] Order created successfully. Order ID: 22
2025-04-16 21:23:08.946 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:23:08.964 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:23:09.034 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 7153.789ms
2025-04-16 21:23:09.038 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:23:09.044 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:23:09.075 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 7233.7027ms
2025-04-16 21:23:18.689 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:23:18.700 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:23:18.704 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:23:18.728 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:23:18.735 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:23:18.738 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 28.6921ms
2025-04-16 21:23:18.741 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:23:18.744 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 55.6486ms
2025-04-16 21:23:36.335 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:23:36.356 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:23:36.359 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:25:16.806 +01:00 [INF] Starting order processing. Transaction: 223f3091-4686-458c-b699-626b4a5667d5
2025-04-16 21:25:16.966 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:25:17.005 +01:00 [INF] Generating bank account for payment
2025-04-16 21:25:17.013 +01:00 [INF] Acquiring new auth token
2025-04-16 21:25:17.022 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:25:17.027 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:25:17.785 +01:00 [INF] Received HTTP response headers after 755.418ms - 200
2025-04-16 21:25:17.807 +01:00 [INF] End processing HTTP request after 785.1915ms - 200
2025-04-16 21:25:17.837 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:25:17.964 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:25:18.280 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:25:18.630 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:25:18.963 +01:00 [ERR] Failed to generate payment account for amount 500.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:25:18.988 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:25:18.991 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:25:19.014 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:25:19.035 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:25:19.047 +01:00 [INF] Order created successfully. Order ID: 23
2025-04-16 21:25:19.063 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:25:34.019 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:25:34.029 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 117663.6472ms
2025-04-16 21:25:34.034 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:25:34.038 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 21:25:34.067 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 500 null text/plain; charset=utf-8 117732.6931ms
2025-04-16 21:34:03.860 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:34:05.353 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:34:05.451 +01:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:34:05.463 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:34:05.470 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:34:05.544 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:34:05.600 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:34:06.205 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:34:06.778 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:34:07.101 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:34:09.059 +01:00 [INF] Hosting environment: Development
2025-04-16 21:34:10.420 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:34:13.856 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:34:14.373 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 531.7013ms
2025-04-16 21:34:16.612 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:34:16.756 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:34:16.774 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 18.5544ms
2025-04-16 21:34:17.432 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 820.7596ms
2025-04-16 21:34:20.219 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:34:20.302 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.0657ms
2025-04-16 21:38:34.185 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:38:35.559 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:38:35.657 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:38:35.668 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:38:35.675 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:38:35.761 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:38:35.804 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:38:36.293 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:38:36.773 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:38:37.572 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:38:37.660 +01:00 [INF] Hosting environment: Development
2025-04-16 21:38:37.662 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:38:44.227 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:38:44.804 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 592.7657ms
2025-04-16 21:38:48.426 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:38:48.475 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 48.8313ms
2025-04-16 21:38:48.640 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:38:49.644 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1003.8113ms
2025-04-16 21:38:59.274 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 21:38:59.605 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:38:59.679 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:38:59.779 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:39:01.285 +01:00 [INF] Executed DbCommand (124ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:39:02.090 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:39:02.111 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:39:02.140 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 2447.202ms
2025-04-16 21:39:02.148 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:39:02.182 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2906.7468ms
2025-04-16 21:39:02.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:39:02.654 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.8441ms
2025-04-16 21:39:05.388 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:39:05.574 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:39:05.589 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:39:05.847 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:39:05.924 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:39:05.955 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 359.696ms
2025-04-16 21:39:05.961 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:39:05.965 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 576.7846ms
2025-04-16 21:39:21.411 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:39:21.439 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:39:21.459 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:39:32.683 +01:00 [INF] Starting order processing. Transaction: 95b63247-75eb-4c01-8ff4-c464739e2dfe
2025-04-16 21:39:37.272 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:39:39.766 +01:00 [INF] Generating bank account for payment
2025-04-16 21:39:39.776 +01:00 [INF] Acquiring new auth token
2025-04-16 21:39:39.792 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:39:39.797 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:39:40.855 +01:00 [INF] Received HTTP response headers after 1031.7751ms - 200
2025-04-16 21:39:40.925 +01:00 [INF] End processing HTTP request after 1137.8266ms - 200
2025-04-16 21:39:40.967 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:39:41.159 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:39:41.473 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:39:41.871 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:39:42.165 +01:00 [ERR] Failed to generate payment account for amount 500.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:39:42.198 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:39:42.200 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:39:42.820 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:39:42.887 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:39:42.938 +01:00 [INF] Order created successfully. Order ID: 24
2025-04-16 21:39:42.957 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:39:54.781 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:39:54.850 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 33384.553ms
2025-04-16 21:39:54.854 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:39:54.858 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 33447.4905ms
2025-04-16 21:41:44.219 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:41:44.229 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:41:44.233 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:41:44.253 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:41:44.259 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:41:44.268 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 29.1321ms
2025-04-16 21:41:44.272 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:41:44.277 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 58.2184ms
2025-04-16 21:41:57.998 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:41:58.011 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:41:58.016 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:42:00.900 +01:00 [INF] Starting order processing. Transaction: cb1eb4b7-083b-4e06-8666-fbc8dd06d335
2025-04-16 21:42:00.936 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:42:00.945 +01:00 [INF] Generating bank account for payment
2025-04-16 21:42:00.981 +01:00 [INF] Acquiring new auth token
2025-04-16 21:42:00.986 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:42:00.991 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:42:01.826 +01:00 [INF] Received HTTP response headers after 827.8155ms - 200
2025-04-16 21:42:02.101 +01:00 [INF] End processing HTTP request after 1114.7595ms - 200
2025-04-16 21:42:02.111 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:42:02.270 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:42:02.503 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:42:02.712 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:42:03.140 +01:00 [ERR] Failed to generate payment account for amount 500.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:42:03.157 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:42:03.159 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:42:03.177 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:42:03.201 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:42:03.214 +01:00 [INF] Order created successfully. Order ID: 25
2025-04-16 21:42:03.227 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:43:23.467 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:43:23.584 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 85560.4743ms
2025-04-16 21:43:23.588 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:43:23.592 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 85600.3251ms
2025-04-16 21:43:35.849 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:43:35.858 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:43:35.861 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:43:35.888 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:43:35.896 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:43:35.902 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 34.6784ms
2025-04-16 21:43:35.906 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:43:35.910 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 60.5446ms
2025-04-16 21:43:53.640 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:43:53.652 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:43:53.655 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:44:03.093 +01:00 [INF] Starting order processing. Transaction: fcd3bc60-d456-4adb-b5fe-4558cb7f186f
2025-04-16 21:44:03.118 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:44:15.127 +01:00 [INF] Generating bank account for payment
2025-04-16 21:44:18.945 +01:00 [INF] Acquiring new auth token
2025-04-16 21:44:18.948 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:44:18.954 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:44:20.245 +01:00 [INF] Received HTTP response headers after 1285.9649ms - 200
2025-04-16 21:44:20.248 +01:00 [INF] End processing HTTP request after 1299.8132ms - 200
2025-04-16 21:44:20.252 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:44:20.349 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:44:20.555 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:46:20.302 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:46:20.897 +01:00 [ERR] Failed to generate payment account for amount 500.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:46:20.945 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:46:20.954 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:46:20.988 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:46:21.014 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:46:21.022 +01:00 [INF] Order created successfully. Order ID: 26
2025-04-16 21:46:21.035 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:46:26.437 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:46:26.478 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 152816.7813ms
2025-04-16 21:46:26.483 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:46:26.487 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 499 null application/json; charset=utf-8 152847.4854ms
2025-04-16 21:46:54.054 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:46:54.067 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 8:44:01 PM', Current time (UTC): '4/16/2025 8:46:54 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-16 21:46:54.079 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 8:44:01 PM', Current time (UTC): '4/16/2025 8:46:54 PM'.
2025-04-16 21:46:54.083 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-16 21:46:54.095 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-16 21:46:54.097 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 43.3458ms
2025-04-16 21:47:05.203 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 21:47:05.210 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:47:05.214 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:47:05.221 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:47:05.235 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:47:05.735 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:47:05.738 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:47:05.742 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 523.1375ms
2025-04-16 21:47:05.748 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:47:05.755 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 551.3264ms
2025-04-16 21:47:05.777 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:47:05.788 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:47:05.791 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:47:05.805 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:47:05.812 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:47:05.817 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 18.6991ms
2025-04-16 21:47:05.823 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:47:05.834 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 58.0664ms
2025-04-16 21:47:16.268 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:47:16.275 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:47:16.279 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:47:19.649 +01:00 [INF] Starting order processing. Transaction: 6de7ab29-26d2-4f58-97ec-40cf952c3350
2025-04-16 21:47:19.671 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:47:28.374 +01:00 [INF] Generating bank account for payment
2025-04-16 21:47:39.801 +01:00 [INF] Acquiring new auth token
2025-04-16 21:47:49.017 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:47:49.021 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:47:58.829 +01:00 [INF] Received HTTP response headers after 9802.3271ms - 200
2025-04-16 21:47:58.840 +01:00 [INF] End processing HTTP request after 9823.05ms - 200
2025-04-16 21:48:47.524 +01:00 [ERR] Authentication rejected by bank: 96 - system challenge
2025-04-16 21:52:10.758 +01:00 [ERR] Error during authentication
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
2025-04-16 21:52:11.027 +01:00 [FTL] Failed to obtain authentication token
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
2025-04-16 21:52:11.168 +01:00 [ERR] Failed to generate bank account for payment
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
2025-04-16 21:52:11.322 +01:00 [ERR] Failed to generate payment account for amount 500.00
System.Exception: Authentication failed: system challenge
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GetAuthTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 139
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.EnsureValidTokenAsync() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 99
   at MiniSupermarketSystem.Infrastructure.Services.Implementation.NovusBankPaymentService.GenerateBankAccountForPayment(Decimal amount, String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Services\Implementation\NovusBankPaymentService.cs:line 39
   at MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommandHandler.Handle(CreateOrderCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\CreateOrderCommand.cs:line 80
2025-04-16 21:52:11.331 +01:00 [WRN] Using test account due to payment service failure
2025-04-16 21:52:11.333 +01:00 [INF] Payment account generated. Bank: Test Bank, Account: 1234568798
2025-04-16 21:52:11.385 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:52:11.397 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:52:11.402 +01:00 [INF] Order created successfully. Order ID: 27
2025-04-16 21:52:11.410 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:55:25.373 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 21:55:26.963 +01:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:55:27.143 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:55:27.156 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 21:55:27.162 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 21:55:27.262 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 21:55:27.322 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 21:55:28.167 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 21:55:29.344 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 21:55:29.661 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 21:55:29.683 +01:00 [INF] Hosting environment: Development
2025-04-16 21:55:29.698 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 21:55:33.932 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 21:55:35.007 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1102.7915ms
2025-04-16 21:55:38.338 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 21:55:38.511 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 21:55:38.530 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 19.2551ms
2025-04-16 21:55:38.925 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 587.2008ms
2025-04-16 21:55:44.091 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 21:55:44.165 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.0882ms
2025-04-16 21:56:22.240 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 21:56:22.533 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:56:22.589 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 21:56:22.678 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 21:56:23.732 +01:00 [INF] Executed DbCommand (95ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 21:56:24.539 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 21:56:24.555 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 21:56:24.587 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1979.7007ms
2025-04-16 21:56:24.594 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 21:56:24.613 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2373.3643ms
2025-04-16 21:56:27.582 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:56:27.742 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:56:27.754 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:56:27.974 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:56:28.059 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:56:28.121 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 360.5673ms
2025-04-16 21:56:28.125 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:56:28.131 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 549.2515ms
2025-04-16 21:56:38.402 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:56:38.426 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:56:38.444 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:56:42.237 +01:00 [INF] Starting order processing. Transaction: fd622a0f-8e6c-4311-9967-7f302b052205
2025-04-16 21:56:42.364 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:56:46.131 +01:00 [INF] Generating bank account for payment
2025-04-16 21:56:48.143 +01:00 [INF] Acquiring new auth token
2025-04-16 21:56:55.834 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:56:55.839 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:56:57.456 +01:00 [INF] Received HTTP response headers after 1607.8768ms - 200
2025-04-16 21:56:57.461 +01:00 [INF] End processing HTTP request after 1631.6233ms - 200
2025-04-16 21:57:35.872 +01:00 [INF] Auth token acquired (expires at "2026-04-16T21:56:56.9984923+01:00")
2025-04-16 21:58:32.082 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 21:58:32.240 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 21:58:38.677 +01:00 [INF] Received HTTP response headers after 6429.619ms - 200
2025-04-16 21:58:38.683 +01:00 [INF] End processing HTTP request after 6600.8982ms - 200
2025-04-16 21:58:38.707 +01:00 [INF] Successfully generated account 9916554857 at Novus Bank
2025-04-16 21:58:38.711 +01:00 [INF] Payment account generated. Bank: Novus Bank, Account: 9916554857
2025-04-16 21:58:39.445 +01:00 [INF] Executed DbCommand (89ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:58:39.569 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:58:39.647 +01:00 [INF] Order created successfully. Order ID: 28
2025-04-16 21:58:39.680 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:58:43.779 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:58:43.855 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 125382.1882ms
2025-04-16 21:58:43.859 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:58:43.864 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 499 null application/json; charset=utf-8 125461.8772ms
2025-04-16 21:58:49.305 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-16 21:58:49.316 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:58:49.320 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-16 21:58:49.337 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-16 21:58:49.346 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-16 21:58:49.350 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 23.3932ms
2025-04-16 21:58:49.354 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-16 21:58:49.358 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 52.9448ms
2025-04-16 21:59:08.940 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-16 21:59:08.949 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:59:08.952 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 21:59:11.874 +01:00 [INF] Starting order processing. Transaction: a45d0c47-981c-4523-a663-b80c016b8c27
2025-04-16 21:59:11.931 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-16 21:59:14.385 +01:00 [INF] Generating bank account for payment
2025-04-16 21:59:16.342 +01:00 [INF] Acquiring new auth token
2025-04-16 21:59:17.986 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:59:18.008 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-16 21:59:18.877 +01:00 [INF] Received HTTP response headers after 865.714ms - 200
2025-04-16 21:59:19.534 +01:00 [INF] End processing HTTP request after 1548.1131ms - 200
2025-04-16 21:59:20.476 +01:00 [INF] Auth token acquired (expires at "2026-04-16T21:59:18.5779705+01:00")
2025-04-16 21:59:21.480 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 21:59:21.557 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-16 21:59:21.893 +01:00 [INF] Received HTTP response headers after 333.1118ms - 200
2025-04-16 21:59:21.896 +01:00 [INF] End processing HTTP request after 416.6879ms - 200
2025-04-16 21:59:21.904 +01:00 [INF] Successfully generated account 9919340868 at Novus Bank
2025-04-16 21:59:21.909 +01:00 [INF] Payment account generated. Bank: Novus Bank, Account: 9919340868
2025-04-16 21:59:21.929 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-16 21:59:21.943 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-16 21:59:21.954 +01:00 [INF] Order created successfully. Order ID: 29
2025-04-16 21:59:21.969 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-16 21:59:24.123 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 21:59:24.133 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 15173.382ms
2025-04-16 21:59:24.137 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-16 21:59:24.141 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 15201.7446ms
2025-04-16 22:08:28.618 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:08:30.249 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:08:30.345 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:08:30.355 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:08:30.359 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:08:30.425 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:08:30.506 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:08:31.104 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 22:08:31.837 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 22:08:32.144 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:08:32.148 +01:00 [INF] Hosting environment: Development
2025-04-16 22:08:32.151 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 22:08:40.542 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 22:08:41.520 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1010.0848ms
2025-04-16 22:08:43.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:08:43.908 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 22:08:44.004 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 97.7052ms
2025-04-16 22:08:46.983 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 3075.0692ms
2025-04-16 22:08:49.493 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 22:08:49.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.5988ms
2025-04-16 22:10:21.030 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:10:21.405 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:10:21.449 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:10:33.476 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252210162389916239238435","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416211016750837122595","TransactionId":"20250416101019565351","SessionId":"100067250416211016750837122595","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:10:33.507 +01:00 [INF] Processing successful payment for reference: 9919340868
2025-04-16 22:12:08.001 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:12:09.579 +01:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:12:09.703 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:12:09.715 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:12:09.722 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:12:09.813 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:12:09.893 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:12:10.455 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 22:12:11.064 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 22:12:11.668 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:12:12.422 +01:00 [INF] Hosting environment: Development
2025-04-16 22:12:12.426 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 22:12:15.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 22:12:16.095 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 650.4197ms
2025-04-16 22:12:17.833 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:12:17.860 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 26.6751ms
2025-04-16 22:12:17.944 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 22:12:18.739 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 795.0018ms
2025-04-16 22:12:20.056 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 22:12:20.160 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.8641ms
2025-04-16 22:12:29.108 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:12:29.408 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:12:29.467 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:12:35.783 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252212269199915602845455","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416211226402656996371","TransactionId":"20250416101227088631","SessionId":"100067250416211226402656996371","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:12:57.216 +01:00 [ERR] Unexpected error processing payment notification
System.InvalidOperationException: The requested operation requires an element of type 'String', but the target element has type 'Number'.
   at System.Text.Json.ThrowHelper.ThrowJsonElementWrongTypeException(JsonTokenType expectedType, JsonTokenType actualType)
   at System.Text.Json.JsonDocument.GetString(Int32 index, JsonTokenType expectedType)
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 46
2025-04-16 22:12:57.289 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:12:57.311 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 27828.7935ms
2025-04-16 22:12:57.314 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:12:57.319 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 28212.5759ms
2025-04-16 22:14:55.568 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:14:55.586 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:14:55.590 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:15:01.002 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252214536449915993259407","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416211453697641669951","TransactionId":"20250416101453728479","SessionId":"100067250416211453697641669951","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:15:05.934 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:15:05.934 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:15:06.966 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:15:06.966 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:15:06.973 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:15:06.973 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:15:25.485 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252212269199915602845455","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416211226402656996371","TransactionId":"20250416101227088631","SessionId":"100067250416211226402656996371","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:15:28.170 +01:00 [ERR] Unexpected error processing payment notification
System.InvalidOperationException: The requested operation requires an element of type 'String', but the target element has type 'Number'.
   at System.Text.Json.ThrowHelper.ThrowJsonElementWrongTypeException(JsonTokenType expectedType, JsonTokenType actualType)
   at System.Text.Json.JsonDocument.GetString(Int32 index, JsonTokenType expectedType)
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 46
2025-04-16 22:15:28.301 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:15:28.306 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 21318.7753ms
2025-04-16 22:15:28.309 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:15:28.313 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 22378.7288ms
2025-04-16 22:35:18.280 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:35:18.384 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:35:20.009 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:35:20.187 +01:00 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:35:20.245 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:35:20.253 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:35:20.386 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:35:20.454 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:35:20.983 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 22:35:21.936 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 22:35:22.404 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:35:22.408 +01:00 [INF] Hosting environment: Development
2025-04-16 22:35:22.411 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 22:35:26.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 22:35:27.195 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 775.6006ms
2025-04-16 22:35:28.806 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:35:28.806 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 22:35:28.827 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 21.1113ms
2025-04-16 22:35:29.329 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 523.6979ms
2025-04-16 22:35:32.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 22:35:32.449 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.3083ms
2025-04-16 22:35:57.857 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:35:58.119 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:35:58.157 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:36:05.079 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252235483259915292914319","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213548106274487964","TransactionId":"20250416103556612687","SessionId":"100067250416213548106274487964","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:36:21.173 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:36:34.138 +01:00 [INF] Executed DbCommand (204ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:36:34.337 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:36:35.013 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 46
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:36:35.150 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:36:35.180 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 37007.2305ms
2025-04-16 22:36:35.185 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:36:35.200 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 37344.216ms
2025-04-16 22:37:22.040 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:37:22.064 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:37:22.073 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:37:25.479 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252237204349912187826456","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213720542395255614","TransactionId":"20250416103720610893","SessionId":"100067250416213720542395255614","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:37:25.492 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:38:06.374 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:38:06.386 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:38:06.675 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method32(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 46
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:38:06.693 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:38:06.698 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 44617.0912ms
2025-04-16 22:38:06.713 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:38:06.718 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 44679.556ms
2025-04-16 22:40:01.885 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:40:01.884 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:40:01.922 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:40:01.922 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:40:01.934 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:43:07.505 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:43:07.565 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:43:08.692 +01:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:43:08.784 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:43:08.796 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:43:08.802 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:43:08.862 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:43:08.926 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:43:09.404 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 22:43:09.911 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 22:43:10.198 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:43:10.201 +01:00 [INF] Hosting environment: Development
2025-04-16 22:43:10.203 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 22:43:15.324 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 22:43:15.905 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 592.7654ms
2025-04-16 22:43:17.464 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 22:43:17.464 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:43:17.491 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 26.4965ms
2025-04-16 22:43:18.098 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 634.0928ms
2025-04-16 22:43:20.518 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 22:43:20.589 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.0878ms
2025-04-16 22:43:36.279 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 22:43:36.549 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 22:43:36.629 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 22:43:36.712 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 22:43:37.650 +01:00 [INF] Executed DbCommand (107ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 22:43:38.408 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 22:43:38.431 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:43:38.467 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1820.2371ms
2025-04-16 22:43:38.475 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 22:43:38.494 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2215.4457ms
2025-04-16 22:44:12.968 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/9919340868 - null null
2025-04-16 22:44:13.304 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:44:13.329 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:44:20.934 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:44:20.947 +01:00 [WRN] Order not found for reference: 9919340868
2025-04-16 22:44:20.957 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:44:21.004 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 7668.0749ms
2025-04-16 22:44:21.009 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:44:21.014 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/9919340868 - 404 null application/problem+json; charset=utf-8 8046.1935ms
2025-04-16 22:45:01.190 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:45:01.210 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:45:01.226 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:45:05.893 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252235483259915292914319","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213548106274487964","TransactionId":"20250416103556612687","SessionId":"100067250416213548106274487964","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:45:05.903 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:45:09.502 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:45:18.078 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:45:18.083 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:45:22.899 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252237204349912187826456","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213720542395255614","TransactionId":"20250416103720610893","SessionId":"100067250416213720542395255614","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:45:26.631 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:45:30.339 +01:00 [INF] Executed DbCommand (1,460ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:45:30.435 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:45:30.442 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:45:30.793 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:45:31.129 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 52
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:45:31.768 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method90(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 52
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:45:31.811 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:45:31.829 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:45:31.835 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 30602.559ms
2025-04-16 22:45:31.836 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 13744.9351ms
2025-04-16 22:45:31.841 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:45:31.845 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:45:31.850 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 30660.5404ms
2025-04-16 22:45:31.853 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 22351.4624ms
2025-04-16 22:46:54.624 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 22:46:54.647 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:46:54.656 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:47:01.353 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:47:01.365 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:47:01.597 +01:00 [ERR] Error retrieving order a45d0c47-981c-4523-a663-b80c016b8c27
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 22:47:01.802 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 7127.9369ms
2025-04-16 22:47:01.807 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:47:01.814 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 24
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:47:01.880 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 500 null text/plain; charset=utf-8 7256.3659ms
2025-04-16 22:49:08.256 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:49:08.397 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 22:49:09.758 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:49:09.833 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:49:09.844 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 22:49:09.851 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 22:49:09.937 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 22:49:09.986 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 22:49:10.433 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 22:49:10.897 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 22:49:11.275 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 22:49:12.094 +01:00 [INF] Hosting environment: Development
2025-04-16 22:49:12.106 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 22:49:12.124 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 22:49:12.773 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 22:49:12.879 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 22:49:13.057 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 22:49:13.986 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 22:49:14.715 +01:00 [INF] Executed DbCommand (106ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 22:49:14.860 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 874.1233ms
2025-04-16 22:49:15.539 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 22:49:15.558 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:49:15.586 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 2688.3382ms
2025-04-16 22:49:15.592 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 22:49:15.612 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 3520.5847ms
2025-04-16 22:49:16.604 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 22:49:16.621 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 16.781ms
2025-04-16 22:49:16.655 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 22:49:17.316 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 660.9465ms
2025-04-16 22:49:18.275 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 22:49:18.399 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 125.139ms
2025-04-16 22:49:46.328 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/public async Task<Order> GetOrderByReferenceAsync(string reference) - null null
2025-04-16 22:49:46.563 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:49:46.610 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:49:49.071 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:49:49.084 +01:00 [WRN] Order not found for reference: public async Task<Order> GetOrderByReferenceAsync(string reference)
2025-04-16 22:49:49.095 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-04-16 22:49:49.178 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 2561.005ms
2025-04-16 22:49:49.271 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:49:49.276 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/public async Task<Order> GetOrderByReferenceAsync(string reference) - 404 null application/problem+json; charset=utf-8 2948.9863ms
2025-04-16 22:50:04.195 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 22:50:04.223 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:50:04.227 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:50:07.089 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:50:07.158 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:50:07.552 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:50:07.651 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-16 22:50:07.773 +01:00 [ERR] Error retrieving order a45d0c47-981c-4523-a663-b80c016b8c27
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 22:50:07.804 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:50:07.810 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:50:08.131 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 3895.6532ms
2025-04-16 22:50:08.141 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:50:08.143 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:50:08.145 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-16 22:50:08.161 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:50:11.109 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252235483259915292914319","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213548106274487964","TransactionId":"20250416103556612687","SessionId":"100067250416213548106274487964","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:50:12.972 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11604252237204349912187826456","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416213720542395255614","TransactionId":"20250416103720610893","SessionId":"100067250416213720542395255614","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-16 22:50:13.026 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:50:13.030 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-16 22:50:13.035 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 500 null text/plain; charset=utf-8 8840.4026ms
2025-04-16 22:50:32.957 +01:00 [INF] Executed DbCommand (77ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:50:32.994 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:50:33.015 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:50:33.142 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:50:33.380 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 53
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:50:33.701 +01:00 [ERR] Unexpected error processing payment notification
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method110(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByAccountNumberAsync(String accountno) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 53
   at MiniSupermarketSystem.Application.Orders.Command.VerifyPaymentCommandHandler.Handle(VerifyPaymentCommand request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Command\VerifyPaymentCommand.cs:line 23
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification() in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\PaymentWebhookController.cs:line 61
2025-04-16 22:50:33.717 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:50:33.741 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 22:50:33.746 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 25598.3056ms
2025-04-16 22:50:33.754 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:50:33.748 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 22638.0592ms
2025-04-16 22:50:33.759 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 26206.9858ms
2025-04-16 22:50:33.763 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-16 22:50:33.775 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 500 null application/json; charset=utf-8 26124.0012ms
2025-04-16 22:50:47.176 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 22:50:47.188 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:50:47.193 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:50:57.873 +01:00 [INF] Executed DbCommand (79ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:50:57.883 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:50:58.824 +01:00 [ERR] Error retrieving order a45d0c47-981c-4523-a663-b80c016b8c27
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 22:50:59.172 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 11974.2137ms
2025-04-16 22:50:59.177 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:50:59.182 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:50:59.224 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 500 null text/plain; charset=utf-8 12048.4438ms
2025-04-16 22:52:20.380 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 22:52:20.389 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:52:20.394 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 22:52:44.897 +01:00 [INF] Executed DbCommand (68ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 22:52:44.917 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 22:52:45.288 +01:00 [ERR] Error retrieving order a45d0c47-981c-4523-a663-b80c016b8c27
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 22:52:45.486 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 25084.8317ms
2025-04-16 22:52:45.492 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 22:52:45.497 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 22:52:45.546 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 500 null text/plain; charset=utf-8 25166.0989ms
2025-04-16 23:06:01.150 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:01.204 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:02.485 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:02.496 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:50.482 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:50.542 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:06:51.692 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:06:51.758 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:06:51.763 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:06:51.765 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:06:51.813 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:06:51.856 +01:00 [INF] Applying migration '20250416220604_AmountPaidMigration'.
2025-04-16 23:06:52.121 +01:00 [ERR] Failed executing DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Orders]') AND [c].[name] = N'AmountPaid');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Orders] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Orders] SET [AmountPaid] = 0.0 WHERE [AmountPaid] IS NULL;
ALTER TABLE [Orders] ALTER COLUMN [AmountPaid] decimal(18,2) NOT NULL;
ALTER TABLE [Orders] ADD DEFAULT 0.0 FOR [AmountPaid];
2025-04-16 23:07:39.896 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:07:39.947 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:07:40.767 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:07:40.830 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:07:40.835 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:07:40.836 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:07:40.879 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:07:40.917 +01:00 [INF] Applying migration '20250416220604_AmountPaidMigration'.
2025-04-16 23:07:41.130 +01:00 [ERR] Failed executing DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Orders]') AND [c].[name] = N'AmountPaid');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Orders] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Orders] SET [AmountPaid] = 0.0 WHERE [AmountPaid] IS NULL;
ALTER TABLE [Orders] ALTER COLUMN [AmountPaid] decimal(18,2) NOT NULL;
ALTER TABLE [Orders] ADD DEFAULT 0.0 FOR [AmountPaid];
2025-04-16 23:14:24.894 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:24.946 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:26.278 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:26.282 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:54.024 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:54.079 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:14:54.859 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:14:54.926 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:14:54.933 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:14:54.935 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:14:54.991 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:14:55.031 +01:00 [INF] Applying migration '20250416221427_AmountPaidMigration'.
2025-04-16 23:14:55.160 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$JO1VGgJ9yw./NtRxikUcJeOGLkHG4HhM2zAGCxtkVTrTNyyR5nxPi'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2025-04-16 23:14:55.163 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$moqej2.H77nK5HZlXQQBf.EX8yfW7/is25Xx9zKNtPLdETpYZUsne'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2025-04-16 23:14:55.166 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250416221427_AmountPaidMigration', N'8.0.0');
2025-04-16 23:23:35.073 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:23:35.130 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:23:36.464 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:23:36.470 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:28:15.550 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:28:17.115 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:28:17.214 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:28:17.224 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:28:17.231 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:28:17.303 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:28:17.359 +01:00 [INF] Applying migration '20250416222338_AmountwPaidMigration'.
2025-04-16 23:28:17.558 +01:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$ZbfB.2Z/7ctp4y0T9Q6eh.GFuFaim.AT1tCKlo8dwvaRRqxn.oN8u'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2025-04-16 23:28:17.568 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$mHIxK7wo.oYb.BLPsHJqWOEyUmpTHiX1gvsxi8cAvt9Icp4BO1gqK'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2025-04-16 23:28:17.580 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250416222338_AmountwPaidMigration', N'8.0.0');
2025-04-16 23:28:18.136 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 23:28:18.878 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 23:28:20.386 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 23:28:20.886 +01:00 [INF] Hosting environment: Development
2025-04-16 23:28:20.898 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 23:28:26.269 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 23:28:27.804 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1545.3871ms
2025-04-16 23:28:29.181 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 23:28:29.186 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 23:28:29.216 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 34.8734ms
2025-04-16 23:28:29.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 672.3641ms
2025-04-16 23:28:31.030 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 23:28:31.201 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 171.0216ms
2025-04-16 23:28:39.234 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 23:28:39.598 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:28:39.663 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 23:28:39.753 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 23:28:40.835 +01:00 [INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 23:28:41.593 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 23:28:41.616 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 23:28:41.659 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1976.5303ms
2025-04-16 23:28:41.667 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:28:41.686 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2452.2511ms
2025-04-16 23:29:09.123 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 23:29:09.288 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:29:09.308 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 23:29:20.013 +01:00 [INF] Executed DbCommand (55ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 23:29:33.471 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-16 23:29:33.667 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 24351.308ms
2025-04-16 23:29:33.679 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:29:33.690 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 200 null application/json; charset=utf-8 24567.1226ms
2025-04-16 23:37:22.624 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:37:22.689 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:37:23.855 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:37:23.952 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:37:23.966 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:37:23.975 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:37:24.047 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:37:24.106 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 23:37:24.715 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 23:37:25.297 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 23:37:25.608 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 23:37:25.624 +01:00 [INF] Hosting environment: Development
2025-04-16 23:37:25.626 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 23:37:26.962 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 23:37:27.570 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:37:27.682 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 23:37:27.881 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 23:37:29.405 +01:00 [INF] Executed DbCommand (124ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 23:37:30.626 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 23:37:30.664 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 23:37:30.716 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 23:37:30.760 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 3002.0757ms
2025-04-16 23:37:30.785 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:37:30.827 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 3894.2969ms
2025-04-16 23:37:31.822 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1106.3673ms
2025-04-16 23:37:33.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 23:37:33.395 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 41.7478ms
2025-04-16 23:37:33.408 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 23:37:33.804 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 395.8041ms
2025-04-16 23:37:35.650 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 23:37:35.705 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 55.1784ms
2025-04-16 23:38:03.395 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-16 23:38:03.565 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:38:03.592 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 23:38:14.030 +01:00 [INF] Executed DbCommand (59ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 23:38:14.085 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 23:38:14.661 +01:00 [ERR] Error retrieving order a45d0c47-981c-4523-a663-b80c016b8c27
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 23:38:15.002 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 11402.7846ms
2025-04-16 23:38:15.031 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:38:15.044 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 23:38:15.141 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 500 null text/plain; charset=utf-8 11745.8838ms
2025-04-16 23:39:31.951 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:39:32.002 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:39:33.281 +01:00 [WRN] No store type was specified for the decimal property 'AmountPaid' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:39:33.284 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:42:09.888 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:42:47.485 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:42:49.060 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:42:51.890 +01:00 [INF] Executed DbCommand (140ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:42:52.017 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:42:52.117 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:43:35.730 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:43:37.974 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:47:22.762 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:47:23.625 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:47:23.692 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:47:23.698 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:47:23.700 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:47:23.754 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:47:23.808 +01:00 [INF] Applying migration '20250416224340_Amount3PaidMigration'.
2025-04-16 23:47:24.006 +01:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Orders] ADD [AmountPaid] decimal(18,2) NOT NULL DEFAULT 0.0;
2025-04-16 23:50:42.470 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:50:43.446 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:50:43.537 +01:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:50:43.545 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:50:43.548 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:50:43.625 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:50:43.674 +01:00 [INF] Applying migration '20250416224340_Amount3PaidMigration'.
2025-04-16 23:50:43.937 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
        IF NOT EXISTS (SELECT * FROM sys.columns 
                       WHERE object_id = OBJECT_ID('Orders') 
                       AND name = 'AmountPaid')
        BEGIN
            ALTER TABLE Orders ADD AmountPaid DECIMAL(18,2) NOT NULL DEFAULT 0;
        END
2025-04-16 23:50:43.948 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$L9yUysb83/yJKjnXiAqWOezTFf7dDo/pnpNw0OaQw6ke2lI8eVQaC'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2025-04-16 23:50:43.950 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Users] SET [PasswordHash] = N'$2a$11$sNS7fqKJbUakF.XsXNJAzucOk/D.M1Eg1vnAlKHoOdzMmBhnmHL3K'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2025-04-16 23:50:43.954 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250416224340_Amount3PaidMigration', N'8.0.0');
2025-04-16 23:52:04.052 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:52:06.210 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:52:06.284 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:52:06.292 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:52:06.298 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:52:06.375 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:52:06.433 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 23:52:07.012 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 23:52:07.690 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 23:52:08.000 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 23:52:08.031 +01:00 [INF] Hosting environment: Development
2025-04-16 23:52:08.041 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 23:52:12.289 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 23:52:13.338 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 1074.3433ms
2025-04-16 23:52:14.770 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 23:52:14.770 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 23:52:14.811 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 44.1187ms
2025-04-16 23:52:15.953 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1182.8191ms
2025-04-16 23:52:17.502 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 23:52:17.843 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 340.7921ms
2025-04-16 23:52:30.569 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 23:52:30.914 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:52:30.979 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 23:52:31.087 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 23:52:32.340 +01:00 [INF] Executed DbCommand (236ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 23:52:33.332 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 23:52:33.354 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 23:52:33.395 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 2392.2418ms
2025-04-16 23:52:33.402 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:52:33.423 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2854.0723ms
2025-04-16 23:52:57.909 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - null null
2025-04-16 23:52:58.153 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:52:58.191 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 23:53:08.354 +01:00 [INF] Executed DbCommand (64ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 23:53:08.420 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 23:53:08.964 +01:00 [ERR] Error retrieving order 8ff00262-3717-44aa-b6c7-1abcdad6d04d
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 23:53:09.570 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 11371.4509ms
2025-04-16 23:53:09.584 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:53:09.596 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 23:53:09.701 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - 500 null text/plain; charset=utf-8 11792.3943ms
2025-04-16 23:57:05.230 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-16 23:57:07.338 +01:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:57:07.484 +01:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:57:07.701 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-16 23:57:07.710 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-16 23:57:07.835 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-16 23:57:07.928 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-16 23:57:08.748 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-16 23:57:09.500 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-16 23:57:09.823 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-16 23:57:09.832 +01:00 [INF] Hosting environment: Development
2025-04-16 23:57:09.835 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-16 23:57:13.248 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-16 23:57:15.316 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2088.848ms
2025-04-16 23:57:15.474 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-16 23:57:15.476 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-16 23:57:15.507 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 33.1913ms
2025-04-16 23:57:15.756 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 280.4796ms
2025-04-16 23:57:16.021 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-16 23:57:16.270 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 249.4674ms
2025-04-16 23:57:20.615 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-16 23:57:20.913 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:57:20.975 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-16 23:57:21.079 +01:00 [INF] Authentication attempt for user: Izu
2025-04-16 23:57:22.040 +01:00 [INF] Executed DbCommand (92ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-16 23:57:22.909 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-16 23:57:22.933 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-16 23:57:22.981 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 1978.1626ms
2025-04-16 23:57:23.007 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-16 23:57:23.035 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 2419.2259ms
2025-04-16 23:57:38.937 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - null null
2025-04-16 23:57:39.136 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:57:39.155 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-16 23:57:49.932 +01:00 [INF] Executed DbCommand (81ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-16 23:57:50.148 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniSupermarketSystem.Infrastructure.Persistence.SupermarketDbContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-04-16 23:57:50.661 +01:00 [ERR] Error retrieving order 8ff00262-3717-44aa-b6c7-1abcdad6d04d
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
2025-04-16 23:57:51.036 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 11873.0599ms
2025-04-16 23:57:51.043 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-16 23:57:51.051 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_Decimal()
   at Microsoft.Data.SqlClient.SqlDataReader.GetDecimal(Int32 i)
   at lambda_method72(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at MiniSupermarketSystem.Infrastructure.Persistence.Repositories.OrderRepository.GetOrderByReferenceAsync(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Infrastructure\Persistence\Repositories\OrderRepository.cs:line 25
   at MiniSupermarketSystem.Application.Orders.Queries.GetOrderByReferenceQueryHandler.Handle(GetOrderByReferenceQuery request, CancellationToken cancellationToken) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.Application\Orders\Queries\GetOrderByReferenceQuery.cs:line 25
   at MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder(String reference) in C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API\Controllers\OrdersController.cs:line 43
   at lambda_method56(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-04-16 23:57:51.111 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - 500 null text/plain; charset=utf-8 12173.5555ms
2025-04-17 00:03:11.892 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - null null
2025-04-17 00:03:11.909 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:03:11.914 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-17 00:03:21.450 +01:00 [INF] Executed DbCommand (78ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-17 00:03:28.837 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-17 00:03:28.881 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 16960.0377ms
2025-04-17 00:03:28.886 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:03:28.890 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/8ff00262-3717-44aa-b6c7-1abcdad6d04d - 200 null application/json; charset=utf-8 16998.0976ms
2025-04-17 00:03:42.799 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-17 00:03:42.812 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 11:02:22 PM', Current time (UTC): '4/16/2025 11:03:42 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-17 00:03:42.825 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/16/2025 11:02:22 PM', Current time (UTC): '4/16/2025 11:03:42 PM'.
2025-04-17 00:03:42.832 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-17 00:03:42.845 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-17 00:03:42.849 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 49.8793ms
2025-04-17 00:03:51.992 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-17 00:03:51.999 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:03:52.003 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-17 00:03:52.012 +01:00 [INF] Authentication attempt for user: Izu
2025-04-17 00:03:52.024 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-17 00:03:52.519 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-17 00:03:52.522 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-17 00:03:52.526 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 518.8158ms
2025-04-17 00:03:52.530 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:03:52.534 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 542.2071ms
2025-04-17 00:03:52.542 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-17 00:03:52.549 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-17 00:03:52.561 +01:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[MiniSupermarketSystem.Application.Product.Dtos.ProductDto]]] GetProducts() on controller MiniSupermarketSystem.API.Controllers.ProductsController (MiniSupermarketSystem.API).
2025-04-17 00:03:52.594 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
2025-04-17 00:03:52.603 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[MiniSupermarketSystem.Domain.Entities.Product, MiniSupermarketSystem.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[MiniSupermarketSystem.Application.Product.Dtos.ProductDto, MiniSupermarketSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-17 00:03:52.612 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API) in 46.4243ms
2025-04-17 00:03:52.616 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.ProductsController.GetProducts (MiniSupermarketSystem.API)'
2025-04-17 00:03:52.618 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 200 null application/json; charset=utf-8 76.6327ms
2025-04-17 00:04:03.254 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/orders - application/json; charset=utf-8 null
2025-04-17 00:04:03.261 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-17 00:04:03.279 +01:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] CreateOrder(MiniSupermarketSystem.Application.Orders.Command.CreateOrderCommand) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-17 00:04:06.134 +01:00 [INF] Starting order processing. Transaction: 6bf8af51-4811-463a-a2fa-3a03c3e6ade1
2025-04-17 00:04:06.321 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
FROM [Products] AS [p]
WHERE [p].[Id] = @__p_0
2025-04-17 00:04:10.311 +01:00 [INF] Generating bank account for payment
2025-04-17 00:04:11.386 +01:00 [INF] Acquiring new auth token
2025-04-17 00:04:14.096 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-17 00:04:14.102 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/Auth
2025-04-17 00:04:17.680 +01:00 [INF] Received HTTP response headers after 3557.2424ms - 200
2025-04-17 00:04:17.685 +01:00 [INF] End processing HTTP request after 3595.1835ms - 200
2025-04-17 00:04:20.211 +01:00 [INF] Auth token acquired (expires at "2026-04-17T00:04:17.1005827+01:00")
2025-04-17 00:04:21.294 +01:00 [INF] Start processing HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-17 00:04:21.299 +01:00 [INF] Sending HTTP request POST https://testdev.coralpay.com:5000/BankLinkService/api/CreateStaticAccount
2025-04-17 00:04:26.303 +01:00 [INF] Received HTTP response headers after 5000.4359ms - 200
2025-04-17 00:04:26.314 +01:00 [INF] End processing HTTP request after 5019.8823ms - 200
2025-04-17 00:04:26.335 +01:00 [INF] Successfully generated account 9913594464 at Novus Bank
2025-04-17 00:04:26.339 +01:00 [INF] Payment account generated. Bank: Novus Bank, Account: 9913594464
2025-04-17 00:04:26.659 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([AmountPaid], [BankAccountNumber], [OrderDate], [PaymentDate], [PaymentStatus], [TotalAmount], [TransactionReference])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-17 00:04:26.709 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderDetails] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[Id]
VALUES (@p7, @p8, @p9, @p10);
2025-04-17 00:04:26.759 +01:00 [INF] Order created successfully. Order ID: 30
2025-04-17 00:04:26.775 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Description] = @p0, [Name] = @p1, [Price] = @p2, [QuantityInStock] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-04-17 00:04:30.130 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-17 00:04:30.216 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API) in 26928.2087ms
2025-04-17 00:04:30.225 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.CreateOrder (MiniSupermarketSystem.API)'
2025-04-17 00:04:30.229 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/orders - 201 null application/json; charset=utf-8 26974.644ms
2025-04-17 00:07:00.114 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-17 00:07:01.831 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-17 00:07:01.958 +01:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-17 00:07:01.974 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-17 00:07:01.981 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-17 00:07:02.095 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-17 00:07:02.165 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-17 00:07:02.853 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-17 00:07:03.458 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-17 00:07:03.695 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-17 00:07:03.700 +01:00 [INF] Hosting environment: Development
2025-04-17 00:07:03.702 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-17 00:07:08.477 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-17 00:07:11.439 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 2978.0173ms
2025-04-17 00:07:13.001 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-17 00:07:13.014 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 13.4232ms
2025-04-17 00:07:13.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-17 00:07:13.381 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 364.6095ms
2025-04-17 00:07:15.404 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-17 00:07:15.460 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.4737ms
2025-04-17 00:08:58.476 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-17 00:08:58.663 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-17 00:08:58.708 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-17 00:09:01.352 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11704250008569289912963403868","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9913594464","TraceId":"100067250416230856527744354968","TransactionId":"20250417120857016227","SessionId":"100067250416230856527744354968","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-17 00:09:01.359 +01:00 [INF] Processing successful payment for reference: 9913594464, Amount: 450.0
2025-04-17 00:09:11.646 +01:00 [INF] Executed DbCommand (122ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-17 00:09:22.855 +01:00 [INF] Executed DbCommand (115ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [AmountPaid] = @p0, [BankAccountNumber] = @p1, [OrderDate] = @p2, [PaymentDate] = @p3, [PaymentStatus] = @p4, [TotalAmount] = @p5, [TransactionReference] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-04-17 00:09:22.901 +01:00 [INF] Updated payment status for 9913594464 to completed
2025-04-17 00:09:23.020 +01:00 [INF] Successfully processed payment notification for 9913594464
2025-04-17 00:09:23.058 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-17 00:09:23.116 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 24392.7319ms
2025-04-17 00:09:23.120 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-17 00:09:23.132 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 200 null application/json; charset=utf-8 24656.94ms
2025-04-17 00:09:56.631 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-17 00:10:00.713 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 4082.7266ms
2025-04-17 00:10:01.647 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-17 00:10:01.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-17 00:10:02.102 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 454.9128ms
2025-04-17 00:10:02.740 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 822.4321ms
2025-04-17 00:10:06.669 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-17 00:10:06.710 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.5543ms
2025-04-17 00:10:08.797 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/products - null null
2025-04-17 00:10:08.837 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-17 00:10:08.862 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-17 00:10:08.872 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/products - 401 0 null 75.2121ms
2025-04-17 00:10:38.227 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-17 00:10:38.238 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:10:38.263 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-17 00:10:38.354 +01:00 [INF] Authentication attempt for user: Izu
2025-04-17 00:10:38.600 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-17 00:10:39.222 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-17 00:10:39.227 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-17 00:10:39.235 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 967.0136ms
2025-04-17 00:10:39.241 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:10:39.246 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 1018.9738ms
2025-04-17 00:11:04.784 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/6bf8af51-4811-463a-a2fa-3a03c3e6ade1 - null null
2025-04-17 00:11:04.971 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:11:04.992 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-17 00:11:09.910 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-17 00:11:11.272 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-17 00:11:11.306 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 6308.0912ms
2025-04-17 00:11:11.312 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:11:11.316 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/6bf8af51-4811-463a-a2fa-3a03c3e6ade1 - 200 null application/json; charset=utf-8 6532.5207ms
2025-04-17 00:12:59.575 +01:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-04-17 00:13:01.448 +01:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-17 00:13:01.592 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-17 00:13:01.622 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-17 00:13:01.630 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-17 00:13:01.694 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-17 00:13:01.791 +01:00 [INF] No migrations were applied. The database is already up to date.
2025-04-17 00:13:02.712 +01:00 [INF] User profile is available. Using 'C:\Users\USER\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-17 00:13:03.650 +01:00 [INF] Now listening on: https://localhost:7235
2025-04-17 00:13:04.316 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-17 00:13:04.447 +01:00 [INF] Hosting environment: Development
2025-04-17 00:13:04.451 +01:00 [INF] Content root path: C:\Users\USER\Desktop\Projects\MiniSupermarketSystem\MiniSupermarketSystem.API
2025-04-17 00:13:08.170 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/index.html - null null
2025-04-17 00:13:08.895 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/index.html - 200 null text/html;charset=utf-8 744.3997ms
2025-04-17 00:13:13.544 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - null null
2025-04-17 00:13:13.544 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/_vs/browserLink - null null
2025-04-17 00:13:13.571 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_framework/aspnetcore-browser-refresh.js - 200 13802 application/javascript; charset=utf-8 26.4097ms
2025-04-17 00:13:13.865 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/_vs/browserLink - 200 null text/javascript; charset=UTF-8 320.5523ms
2025-04-17 00:13:16.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - null null
2025-04-17 00:13:16.340 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7235/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.5005ms
2025-04-17 00:14:21.404 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - application/json 658
2025-04-17 00:14:21.608 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-17 00:14:21.646 +01:00 [INF] Route matched with {action = "HandlePaymentNotification", controller = "PaymentWebhook"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] HandlePaymentNotification() on controller MiniSupermarketSystem.API.Controllers.PaymentWebhookController (MiniSupermarketSystem.API).
2025-04-17 00:14:24.348 +01:00 [INF] Received payment notification: {"ProcessorTransactionId":"11704250014193659915599386880","MerchantId":"Izu12","StampDutyCharge":0.0,"TransactionResponseCode":"00","TransactionResponseMessage":"Successful","SourceBankCode":"100067","SourceAccountName":"Tomi test","SourceBankName":"Novus Bank","SourceBankAccountNumber":"6712131415","Amount":450.0,"DestinationBankCode":"100067","DestinationBankName":"Novus Bank","DestinationAccountName":"VA-Izu","DestinationAccountNumber":"9919340868","TraceId":"100067250416231419584126662636","TransactionId":"20250417121419452717","SessionId":"100067250416231419584126662636","Terminal":"Izu123","Description":null,"PaidAmount":0.0,"PaymentDate":null}
2025-04-17 00:14:24.375 +01:00 [INF] Processing successful payment for reference: 9919340868, Amount: 450.0
2025-04-17 00:14:28.917 +01:00 [INF] Executed DbCommand (115ms) [Parameters=[@__accountno_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[BankAccountNumber] = @__accountno_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-17 00:14:38.774 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Orders] SET [AmountPaid] = @p0, [BankAccountNumber] = @p1, [OrderDate] = @p2, [PaymentDate] = @p3, [PaymentStatus] = @p4, [TotalAmount] = @p5, [TransactionReference] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-04-17 00:14:38.807 +01:00 [INF] Updated payment status for 9919340868 to completed
2025-04-17 00:14:38.814 +01:00 [INF] Successfully processed payment notification for 9919340868
2025-04-17 00:14:38.831 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-17 00:14:38.869 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API) in 17210.1736ms
2025-04-17 00:14:38.873 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.PaymentWebhookController.HandlePaymentNotification (MiniSupermarketSystem.API)'
2025-04-17 00:14:38.883 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7235/api/webhooks/payment-notifications - 200 null application/json; charset=utf-8 17479.5493ms
2025-04-17 00:15:12.701 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7235/api/auth/login - application/json; charset=utf-8 null
2025-04-17 00:15:12.711 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:15:12.733 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(MiniSupermarketSystem.API.Controllers.LoginRequest) on controller MiniSupermarketSystem.API.Controllers.AuthController (MiniSupermarketSystem.API).
2025-04-17 00:15:12.791 +01:00 [INF] Authentication attempt for user: Izu
2025-04-17 00:15:12.935 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[MerchantId], [u].[PasswordHash], [u].[TerminalId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-04-17 00:15:13.399 +01:00 [INF] User authenticated successfully: Izu. Token generated.
2025-04-17 00:15:13.402 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-17 00:15:13.411 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API) in 674.0785ms
2025-04-17 00:15:13.417 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.AuthController.Login (MiniSupermarketSystem.API)'
2025-04-17 00:15:13.421 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7235/api/auth/login - 200 null application/json; charset=utf-8 720.6355ms
2025-04-17 00:15:53.704 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - null null
2025-04-17 00:15:53.821 +01:00 [INF] Executing endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:15:53.835 +01:00 [INF] Route matched with {action = "GetOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MiniSupermarketSystem.Application.Order.Dtos.OrderDto]] GetOrder(System.String) on controller MiniSupermarketSystem.API.Controllers.OrdersController (MiniSupermarketSystem.API).
2025-04-17 00:16:00.643 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__reference_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AmountPaid], [t].[BankAccountNumber], [t].[OrderDate], [t].[PaymentDate], [t].[PaymentStatus], [t].[TotalAmount], [t].[TransactionReference], [t0].[Id], [t0].[OrderId], [t0].[ProductId], [t0].[Quantity], [t0].[UnitPrice], [t0].[Id0], [t0].[Description], [t0].[Name], [t0].[Price], [t0].[QuantityInStock]
FROM (
    SELECT TOP(1) [o].[Id], [o].[AmountPaid], [o].[BankAccountNumber], [o].[OrderDate], [o].[PaymentDate], [o].[PaymentStatus], [o].[TotalAmount], [o].[TransactionReference]
    FROM [Orders] AS [o]
    WHERE [o].[TransactionReference] = @__reference_0
) AS [t]
LEFT JOIN (
    SELECT [o0].[Id], [o0].[OrderId], [o0].[ProductId], [o0].[Quantity], [o0].[UnitPrice], [p].[Id] AS [Id0], [p].[Description], [p].[Name], [p].[Price], [p].[QuantityInStock]
    FROM [OrderDetails] AS [o0]
    INNER JOIN [Products] AS [p] ON [o0].[ProductId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[OrderId]
ORDER BY [t].[Id], [t0].[Id]
2025-04-17 00:16:01.562 +01:00 [INF] Executing OkObjectResult, writing value of type 'MiniSupermarketSystem.Application.Order.Dtos.OrderDto'.
2025-04-17 00:16:01.587 +01:00 [INF] Executed action MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API) in 7745.1366ms
2025-04-17 00:16:01.590 +01:00 [INF] Executed endpoint 'MiniSupermarketSystem.API.Controllers.OrdersController.GetOrder (MiniSupermarketSystem.API)'
2025-04-17 00:16:01.593 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7235/api/orders/a45d0c47-981c-4523-a663-b80c016b8c27 - 200 null application/json; charset=utf-8 7888.6677ms
